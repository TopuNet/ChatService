function LayerShow(){return{image_size_percent_from_window_width:.8,image_size_percent_from_window_height:.9,image_sliding:!1,create_dom:function(){var _this=this,dom_body=$("body");_this.dom_bg_layer=$(document.createElement("div")).css({position:"fixed",top:0,left:0,opacity:0,filter:"alpha(opacity=0)","-moz-opacity":0}).appendTo(dom_body),_this.dom_info_box=$(document.createElement("div")).attr("id","info_wrapper").css({position:"fixed",display:"none",top:"0",left:"0",padding:"0",margin:"0"}).appendTo(dom_body),_this.dom_info_bottom_fixed_box=$(document.createElement("div")).appendTo(_this.dom_info_box),_this.dom_info_jroll_box=$(document.createElement("div")).attr("class","jroll").prependTo(_this.dom_info_box),_this.dom_info_p=$(document.createElement("p")).css("margin","0").appendTo(_this.dom_info_jroll_box),_this.dom_image_box=$(document.createElement("div")).css({position:"fixed",display:"none",overflow:"hidden",top:"0",left:"0"}).appendTo(dom_body),_this.dom_close_box=$(document.createElement("div")).css({position:"fixed",display:"none",top:"10px",right:"10px"}).appendTo(dom_body),_this.dom_close_image=$(document.createElement("img")).css({cursor:"pointer"}).appendTo(_this.dom_close_box).on("touchstart mousedown",function(e){e.preventDefault(),_this.close.apply(_this)}),_this.dom_image_ul=$(document.createElement("ul")).css({position:"absolute","list-style":"none",padding:0,margin:0}).appendTo(_this.dom_image_box),_this.dom_image_li=$(document.createElement("li")),_this.dom_arrow_left_box=$(document.createElement("div")).css({position:"absolute",display:"none","text-align":"center"}).appendTo(_this.dom_image_box),_this.dom_arrow_left_image=$(document.createElement("img")).css({display:"inline"}).appendTo(_this.dom_arrow_left_box),_this.dom_arrow_right_box=$(document.createElement("div")).css({position:"absolute",display:"none"}).appendTo(_this.dom_image_box),_this.dom_arrow_right_image=$(document.createElement("img")).css({display:"inline"}).appendTo(_this.dom_arrow_right_box)},resize:function(){var _this=this;if(_this.window_width_px=$(window).width(),_this.window_height_px=$(window).height(),_this.li_width_px=_this.window_width_px*_this.image_size_percent_from_window_width,_this.li_marginLeft_px=_this.window_width_px*(1-_this.image_size_percent_from_window_width)/2,_this.li_item_width_px=_this.li_width_px+_this.li_marginLeft_px,_this.dom_bg_layer.css({width:"100%",height:"100%",background:_this.Paras.bg_color,"z-index":_this.Paras.z_index}),_this.Paras.Pics_close_show&&_this.imageLoad(_this.Paras.Pics_close_path,function($img){var box_size={width:.1*_this.window_width_px,height:.1*_this.window_width_px},img_size=_this.imageGetSize($img,box_size);_this.dom_close_box.css({width:img_size.img_width+"px",height:img_size.img_height+"px","z-index":_this.Paras.z_index+2}),_this.dom_close_image.css({width:img_size.img_width+"px",height:img_size.img_height+"px"}).attr("src",_this.Paras.Pics_close_path),1==_this.Paras.showKind?_this.dom_close_box.appendTo(_this.dom_image_box):2==_this.Paras.showKind&&_this.dom_close_box.appendTo(_this.dom_body)}),1==_this.Paras.showKind){_this.dom_image_box.css({width:_this.window_width_px+"px",height:_this.window_height_px+"px","z-index":_this.Paras.z_index+1});var li_obj=_this.dom_image_ul.find("li");li_obj.css({width:_this.li_width_px+"px",height:_this.window_height_px*_this.image_size_percent_from_window_height+"px","margin-top":_this.window_height_px*(1-_this.image_size_percent_from_window_height)/2+"px","margin-left":_this.li_marginLeft_px+"px"}),_this.dom_image_ul.css({width:_this.li_item_width_px*li_obj.length+"px",height:_this.window_height_px+"px",top:0,left:0}),_this.imageLoad(_this.Paras.Pics_arrow_left,function($img){var arrow_width_px=.8*_this.li_marginLeft_px;arrow_width_px>$img.width&&(arrow_width_px=$img.width);var arrow_height_px=arrow_width_px/$img.width*$img.height;_this.dom_arrow_left_box.css({width:arrow_width_px+"px",height:arrow_height_px+"px",left:.1*_this.li_marginLeft_px,top:"50%","margin-top":"-"+arrow_height_px/2+"px"}).unbind().on("touchstart mousedown",function(e){e.preventDefault(),_this.imageUlSlideLeft.apply(_this,[1])}),_this.dom_arrow_left_image.attr("src",_this.Paras.Pics_arrow_left).css({cursor:"pointer",width:arrow_width_px+"px",height:arrow_height_px+"px"})}),_this.imageLoad(_this.Paras.Pics_arrow_right,function($img){var arrow_width_px=.8*_this.li_marginLeft_px;arrow_width_px>$img.width&&(arrow_width_px=$img.width);var arrow_height_px=arrow_width_px/$img.width*$img.height;_this.dom_arrow_right_box.css({width:arrow_width_px+"px",height:arrow_height_px+"px",right:.1*_this.li_marginLeft_px,top:"50%","margin-top":"-"+arrow_height_px/2+"px"}).unbind().on("touchstart mousedown",function(e){e.preventDefault(),_this.imageUlSlideRight.apply(_this,[1])}),_this.dom_arrow_right_image.attr("src",_this.Paras.Pics_arrow_right).css({cursor:"pointer",width:arrow_width_px+"px",height:arrow_height_px+"px"})})}else if(2==_this.Paras.showKind){_this.info_box_width_px=_this.window_width_px*_this.Paras.info_box_width_per/100,_this.info_box_height_px=_this.window_height_px*_this.Paras.info_box_height_per/100,_this.dom_info_box.css({width:_this.info_box_width_px+"px",height:_this.info_box_height_px+"px",top:"50%",left:"50%","margin-top":-_this.info_box_height_px/2+"px","margin-left":-_this.info_box_width_px/2+"px",background:_this.Paras.info_box_bg,overflow:"hidden","z-index":_this.Paras.z_index+1});var jroll_height=_this.info_box_height_px;_this.Paras.info_bottom_fixed_content&&""!==_this.Paras.info_bottom_fixed_content&&(jroll_height-=_this.Paras.info_bottom_fixed_height,_this.dom_info_bottom_fixed_box.css({height:_this.Paras.info_bottom_fixed_height+"px"})),_this.dom_info_jroll_box.css({height:jroll_height+"px",overflow:"auto"}),_this.dom_info_p.css({"font-size":_this.Paras.info_box_fontSize,color:_this.Paras.info_box_fontColor,padding:_this.Paras.info_box_padding_px+"px","line-height":_this.Paras.info_box_lineHeight}),_this.Paras.info_box_radius&&_this.dom_info_box.css("border-radius","5px")}var resize_n=0,resize_do=function(){++resize_n>1||0!==_this.dom_bg_layer.width()&&setTimeout(function(){_this.isIE678()&&1==_this.Paras.showKind?_this.close.apply(_this,[!0]):_this.resize.apply(_this),resize_n=0},0)};$(window).unbind("resize",resize_do).bind("resize",resize_do)},show:function(opt){var _this=this,opt_default={z_index:400,bg_color:"#000",bg_opacity:.8,showKind:1,Pics:[],Pics_show_index:3,Pics_scroll_speed:500,Pics_arrow_left:"/inc/LayerShow_arrow_left.png",Pics_arrow_right:"/inc/LayerShow_arrow_right.png",callback_image_click:1,info_box_width_per:80,info_box_height_per:90,info_box_radius:!0,info_box_bg:"#fff",info_box_padding_px:20,info_box_fontSize:"14px",info_box_fontColor:"#333",info_box_lineHeight:"30px",info_box_use_JRoll:!0,info_bottom_fixed_height:40,Pics_close_show:!0,Pics_close_path:"/inc/LayerShow_close.png"};if(_this.Paras=$.extend(opt_default,opt),_this.isIE678()&&(_this.Paras.info_box_use_JRoll=!1),_this.dom_bg_layer||_this.create_dom.apply(_this),_this.Paras.callback_before&&_this.Paras.callback_before(),1==_this.Paras.showKind){if(_this.Paras.Pics.length>0){_this.Paras.Pics_show_index>0&&_this.Paras.Pics_show_index<_this.Paras.Pics.length&&!function(){var Pics_temp=_this.Paras.Pics;_this.Paras.Pics=[];for(var i=_this.Paras.Pics_show_index,len=Pics_temp.length;len>i;i++)_this.Paras.Pics.push(Pics_temp[i]);for(i=0;i<_this.Paras.Pics_show_index;i++)_this.Paras.Pics.push(Pics_temp[i])}();var insert_li=function(){_this.dom_image_li.clone().appendTo(_this.dom_image_ul).on("touchstart mousedown",function(e){e.preventDefault(),"function"==typeof _this.Paras.callback_image_click?_this.Paras.callback_image_click($(this)):1==_this.Paras.callback_image_click?_this.close.apply(_this):2==_this.Paras.callback_image_click&&_this.imageUlSlideLeft.apply(_this,[1])})},imageLoaded_success=function(){var imageLoaded_success_count=0;return function($img,now_index){var img_size=_this.imageGetSize.apply(_this,[$img]),background_size=img_size.img_width+"px,"+img_size.img_height+"px";(img_size.img_width>=img_size.box_width||img_size.img_height>=img_size.box_height)&&!_this.isIE678()&&(background_size="contain");var li=_this.dom_image_ul.find("li"),style="";if(style+="float:left;",style+="cursor:pointer;",_this.isIE678()?(style+="position:relative;",$(document.createElement("img")).attr("src",$img.src).css({width:img_size.img_width,height:img_size.img_height,position:"absolute",top:"50%",left:"50%","margin-top":"-"+img_size.img_height/2+"px","margin-left":"-"+img_size.img_width/2+"px"}).appendTo($(li[now_index]))):(style+="background: url("+$img.src+") no-repeat;",style+="background-position: center;",style+="background-size: "+background_size+";"),now_index>0&&(style+="width: "+$(li[0]).css("width")+";",style+="height: "+$(li[0]).css("height")+";",style+="margin-top: "+$(li[0]).css("margin-top")+";",style+="margin-left: "+$(li[0]).css("margin-left")+";"),$(li[now_index]).attr("style",style),0===now_index){_this.resize.apply(_this),_this.dom_close_box.fadeIn(200);for(var i=1,len=_this.Paras.Pics.length,_imageLoaded_success=function(now_index){return function($img){imageLoaded_success($img,now_index)}};len>i;i++)insert_li(),_this.imageLoad.apply(_this,[_this.Paras.Pics[i],_imageLoaded_success(i)]);_this.dom_bg_layer.fadeTo(200,_this.Paras.bg_opacity),_this.dom_image_box.fadeIn(200,function(){_this.Paras.callback_success&&_this.Paras.callback_success(li)})}else++imageLoaded_success_count+1==_this.Paras.Pics.length&&(_this.dom_image_ul.css("width",_this.li_item_width_px*li.length+"px"),"none"==_this.dom_arrow_left_box.css("display")&&(_this.dom_arrow_left_box.fadeIn(200),_this.dom_arrow_right_box.fadeIn(200)))}}();insert_li(),_this.imageLoad.apply(_this,[_this.Paras.Pics[0],function($img){imageLoaded_success($img,0)}])}}else 2==_this.Paras.showKind&&(_this.Paras.info_content&&_this.dom_info_p.html(_this.Paras.info_content),_this.Paras.info_bottom_fixed_content&&_this.dom_info_bottom_fixed_box.html(_this.Paras.info_bottom_fixed_content),_this.resize.apply(_this),_this.dom_bg_layer.fadeTo(200,_this.Paras.bg_opacity),_this.dom_info_box.fadeIn(200,function(){_this.Paras.info_box_use_JRoll&&_this.Paras.JRoll_obj&&(_this.jroll_obj=new _this.Paras.JRoll_obj(_this.dom_info_jroll_box[0]),_this.dom_info_jroll_box.css({overflow:"hidden"})),_this.Paras.callback_success&&_this.Paras.callback_success(_this.jroll_obj)}),_this.dom_close_box.fadeIn(200))},close:function(reShow){var _this=this;if(_this.dom_bg_layer.fadeTo(200,0,function(){$(this).css({width:0,height:0})}),1==_this.Paras.showKind)_this.dom_image_box.fadeOut(200,function(){_this.dom_image_ul.html(""),reShow?_this.show.apply(_this,[_this.Paras]):_this.Paras.callback_close&&_this.Paras.callback_close()});else if(2==_this.Paras.showKind){var info_wrapper_html=_this.dom_info_box.html();_this.Paras.info_box_use_JRoll&&(_this.jroll_obj.destroy(),_this.dom_info_p.removeAttr("style")),_this.dom_info_box.scrollTop(0),_this.dom_info_p.html(""),_this.dom_close_box.fadeOut(200),_this.dom_info_box.fadeOut(200,function(){reShow?_this.show.apply(_this,[_this.Paras]):_this.Paras.callback_close&&_this.Paras.callback_close(info_wrapper_html)})}},imageLoad:function(picPath,callback){var img=new Image;img.src=picPath;var _callback=function(){callback&&callback(img)};img.width?_callback():img.onload=function(){_callback()}},imageGetSize:function(img,box_size){var _this=this;_this.window_width_px=$(window).width(),_this.window_height_px=$(window).height(),box_size||(box_size={width:_this.window_width_px*_this.image_size_percent_from_window_width,height:_this.window_height_px*_this.image_size_percent_from_window_height});var img_width_px=img.width,img_height_px=img.height,img_ratio=img_width_px/img_height_px,box_ratio=box_size.width/box_size.height;return box_ratio>=img_ratio&&img_height_px>box_size.height?(img_height_px=box_size.height,img_width_px=img_height_px*img_ratio):img_ratio>=box_ratio&&img_width_px>box_size.width&&(img_width_px=box_size.width,img_height_px=img_width_px/img_ratio),{img_width:img_width_px,img_height:img_height_px,box_width:box_size.width,box_height:box_size.height}},imageUlSlideLeft:function(x){var _this=this;if(!_this.image_sliding){_this.image_sliding=!0;var li_obj=_this.dom_image_ul.find("li");x>li_obj.length-1||_this.dom_image_ul.animate({left:-x*_this.li_item_width_px+"px"},_this.Paras.Pics_scroll_speed,function(){for(var i=0;x>i;i++)$(li_obj[i]).appendTo(_this.dom_image_ul);_this.dom_image_ul.css("left",0),_this.image_sliding=!1})}},imageUlSlideRight:function(x){var _this=this;if(!_this.image_sliding){_this.image_sliding=!0;var li_obj=_this.dom_image_ul.find("li");if(!(x>li_obj.length-1)){for(var i=0,len=li_obj.length;x>i;i++)$(li_obj[len-i-1]).prependTo(_this.dom_image_ul);_this.dom_image_ul.css("left",-x*_this.li_item_width_px+"px"),_this.dom_image_ul.animate({left:"0"},_this.Paras.Pics_scroll_speed,function(){_this.image_sliding=!1})}}},isIE678:function(){var yes=!1,browser=navigator.appName;if("Microsoft Internet Explorer"==browser){var b_version=navigator.appVersion,version=b_version.split(";"),trim_Version=version[1].replace(/[ ]/g,"");("MSIE6.0"==trim_Version||"MSIE7.0"==trim_Version||"MSIE8.0"==trim_Version)&&(yes=!0)}return yes}}}function RotatingBanner(){return{Timeout_id:null,Rotating:!1,pointer_count:null,pointer_now:0,box_width_px:null,li_width_px:null,autoPlay:null,paras:{effect:null,mobile_effect:null,mobile_effect_touchmove_distance_vw:null,autoPlay:null,box_selector:null,pic_ul_selector:null,pic_li_selector:null,point_ul_selector:null,point_autoCreate:null,point_li_selected_className:null,arrow_left_selector:null,arrow_right_selector:null,duration:null,resize_li:null,distance:null,delay:null},init:function(_paras){var paras_default={effect:"move",mobile_effect:!1,mobile_effect_touchmove_distance_vw:30,autoPlay:null,box_selector:"section.banner",pic_ul_selector:"ul.pic_ul",pic_li_selector:"li",point_ul_selector:"section.banner ul.point_ul",point_autoCreate:!1,point_li_selected_className:"selected",arrow_left_selector:null,arrow_right_selector:null,duration:500,resize_li:!0,distance:1,delay:5e3};this.paras=$.extend(paras_default,_paras),_paras=this.paras,this.autoPlay=_paras.autoPlay,"fade"==_paras.effect&&console.dir(_paras),"fade"==this.paras.effect&&(this.paras.mobile_effect=!1,this.paras.distance=1);var pointer_count=$(_paras.box_selector+" "+_paras.pic_ul_selector+" "+_paras.pic_li_selector).length;if(this.pointer_count=parseInt(pointer_count/_paras.distance),pointer_count%_paras.distance!==0&&this.pointer_count++,_paras.point_autoCreate){var pointer_ul=$(_paras.point_ul_selector),pointer_li=$(document.createElement("li")),_i=0;for(pointer_ul.html("");_i<this.pointer_count;_i++)pointer_li.clone().appendTo(pointer_ul)}this.resize(),this.pic_length>1&&(""!==_paras.point_ul_selector&&this.PointListener(),_paras.arrow_left_selector&&this.arrowLeftListener(),_paras.arrow_right_selector&&this.arrowRightListener(),_paras.autoPlay&&this.preRotating(_paras.autoPlay.toLowerCase()),_paras.mobile_effect&&this.MobileEffectListen())},resize:function(){var n=0,this_obj=this,_paras=this_obj.paras,box_obj=$(_paras.box_selector),pic_ul_obj=$(box_obj.find(_paras.pic_ul_selector)),pic_li_obj=$(box_obj.find(_paras.pic_ul_selector+" "+_paras.pic_li_selector));this_obj.pic_length=pic_li_obj.length,$(window).resize(function(){++n%2!==0&&resize_do()});var resize_do=function(){var box_width_px=_paras.box_width_px=$.outerWidth?box_obj.outerWidth():box_obj.width(),box_height_px=_paras.box_height_px=$.outerHeight?box_obj.outerHeight():box_obj.height();setTimeout(function(){if(_paras.resize_li){if(this_obj.pic_length<1)return;pic_li_obj.css("width",box_width_px+"px"),pic_li_obj.css("height",box_height_px+"px")}if(0===pic_li_obj.length)this_obj.li_width_px=0;else{var _li_obj=$($(_paras.box_selector+" "+_paras.pic_ul_selector+" "+_paras.pic_li_selector)[0]);this_obj.li_width_px=parseFloat(_li_obj.css("width").replace("px",""))+parseFloat(_li_obj.css("margin-left").replace("px",""))+parseFloat(_li_obj.css("margin-right").replace("px",""))}var ul_width_px=this_obj.li_width_px;"move"==_paras.effect&&(ul_width_px*=pic_li_obj.length),pic_ul_obj.css("width",ul_width_px+"px"),n=0},0)};resize_do(this_obj)},preRotating:function(direct){var this_obj=this;if(clearTimeout(this_obj.Timeout_id),"fade"==this_obj.paras.effect)return void(this_obj.Timeout_id=setTimeout(function(){this_obj.paras.autoPlay&&this_obj.fadeToNext()},this_obj.paras.delay));var switch_left_default=function(){this_obj.Timeout_id=setTimeout(function(){this_obj.paras.autoPlay&&this_obj.scrollToLeft()},this_obj.paras.delay)};switch(direct.toLowerCase()){case"left":switch_left_default();break;default:switch_left_default();break;case"right":this_obj.Timeout_id=setTimeout(function(){this_obj.paras.autoPlay&&this_obj.scrollToRight()},this_obj.paras.delay)}},fadeToNext:function(X){var this_obj=this;if(!this_obj.Rotating){this_obj.Rotating=!0;var _paras=this_obj.paras;X||(X=this_obj.paras.distance);var ul_obj=$(_paras.box_selector+" "+_paras.pic_ul_selector),li_obj=ul_obj.find(_paras.pic_li_selector),li_length=li_obj.length,li_obj_last=li_obj.last();if(X>=li_length&&(X=li_length-1),1===X)li_obj=li_obj_last;else{li_obj=ul_obj.find(_paras.pic_li_selector+":gt("+(li_length-X-1)+")");var i=0;for(li_length=li_obj.length;li_length-1>i;i++)$(li_obj[i]).css({display:"none"})}this_obj.setFadeTo.apply(this_obj,[li_obj,this_obj.paras.duration,function(_this_obj,_li_obj){_li_obj.prependTo(ul_obj).css({opacity:"1",display:"block"}),_this_obj.pointer_now+=X,_this_obj.pointer_now>=_this_obj.pointer_count&&(_this_obj.pointer_now-=_this_obj.pointer_count),_this_obj.changePoint(),_this_obj.Rotating=!1,_this_obj.paras.autoPlay&&_this_obj.preRotating(_this_obj.paras.autoPlay.toLowerCase())}])}},scrollToLeft:function(X,Y){var this_obj=this;if(!this_obj.Rotating){this_obj.Rotating=!0;var _paras=this_obj.paras;X||(X=_paras.distance),Y||(Y=1);var ul_obj=$(_paras.box_selector+" "+_paras.pic_ul_selector),ul_left_px_new=-X*this_obj.li_width_px;this_obj.setTranslate.apply(this_obj,[ul_obj,_paras.duration,ul_left_px_new,function(_this_obj,ul_obj){for(var li_obj=ul_obj.find(_paras.pic_li_selector),i=0;X>i;i++)$(li_obj[i]).appendTo(ul_obj);_this_obj.setTranslate.apply(_this_obj,[ul_obj,0,0]),_this_obj.pointer_now+=Y,_this_obj.pointer_now>=_this_obj.pointer_count&&(_this_obj.pointer_now=0),_this_obj.changePoint(),_this_obj.Rotating=!1,_this_obj.paras.autoPlay&&_this_obj.preRotating(_this_obj.paras.autoPlay.toLowerCase())}])}},scrollToRight:function(X,Y){var this_obj=this;if(!this_obj.Rotating){this_obj.Rotating=!0;var _paras=this_obj.paras;X||(X=_paras.distance),Y||(Y=1);for(var ul_obj=$(_paras.box_selector+" "+_paras.pic_ul_selector),li_obj=$(ul_obj.find(_paras.pic_li_selector)),li_obj_len=li_obj.length,i=0;X>i;i++)$(li_obj[li_obj_len-(i+1)]).prependTo(ul_obj);this_obj.setTranslate.apply(this_obj,[ul_obj,0,-X*this_obj.li_width_px]),setTimeout(function(){this_obj.setTranslate.apply(this_obj,[ul_obj,_paras.duration,0,function(_this_obj){_this_obj.pointer_now-=Y,_this_obj.pointer_now<0&&(_this_obj.pointer_now=_this_obj.pointer_count-1),_this_obj.changePoint(),_this_obj.Rotating=!1,_this_obj.paras.autoPlay&&_this_obj.preRotating(_this_obj.paras.autoPlay.toLowerCase())}])},0)}},changePoint:function(){var this_obj=this,_paras=this_obj.paras,obj=$(_paras.point_ul_selector+" li");obj.siblings("."+_paras.point_li_selected_className).removeClass(_paras.point_li_selected_className),$(obj[this_obj.pointer_now]).addClass(_paras.point_li_selected_className)},PointListener:function(){var this_obj=this,_paras=this_obj.paras,obj=$(_paras.point_ul_selector+" li");$(obj[0]).addClass(_paras.point_li_selected_className),obj.on("touchstart mousedown",function(event){event.preventDefault();var n=$(this).index();if(n!=this_obj.pointer_now)if("move"==_paras.effect)n<this_obj.pointer_now&&this_obj.scrollToRight((this_obj.pointer_now-n)*_paras.distance,this_obj.pointer_now-n),n>this_obj.pointer_now&&this_obj.scrollToLeft((n-this_obj.pointer_now)*_paras.distance,n-this_obj.pointer_now);else if("fade"==_paras.effect){var X=n-this_obj.pointer_now;0>X&&(X+=obj.length),this_obj.fadeToNext(X)}})},arrowLeftListener:function(){var this_obj=this,_paras=this_obj.paras;$(_paras.arrow_left_selector).on("touchstart mousedown",function(event){event.preventDefault(),this_obj.scrollToRight()})},arrowRightListener:function(){var this_obj=this,_paras=this_obj.paras;$(_paras.arrow_right_selector).on("touchstart mousedown",function(event){event.preventDefault(),this_obj.scrollToLeft()})},Pause:function(){this.paras.autoPlay=null},reStart:function(direction){this.paras.autoPlay||(this.paras.autoPlay=direction||"left",this.preRotating(this.paras.autoPlay))},MobileEffectListen:function(){var touchstart_x,touchend_x,this_obj=this,_paras=this_obj.paras,pic_ul_obj=$(_paras.box_selector+" "+_paras.pic_ul_selector),window_width_px=$(window).width();pic_ul_obj.on("touchstart",function(event){touchstart_x=event.touches[0].clientX,touchend_x=null,this_obj.Pause()}),pic_ul_obj.on("touchmove",function(event){touchend_x=event.touches[0].clientX}),pic_ul_obj.on("touchend",function(){if(touchend_x){var distance_vw=(touchend_x-touchstart_x)/window_width_px*100,duration=0;(distance_vw>=_paras.mobile_effect_touchmove_distance_vw||distance_vw<=-_paras.mobile_effect_touchmove_distance_vw)&&(duration=_paras.duration,0>distance_vw?this_obj.scrollToLeft():this_obj.scrollToRight()),this_obj.autoPlay&&setTimeout(function(){this_obj.reStart(this_obj.autoPlay)},duration)}})},setTranslate:function(obj,duration,x,callback){var this_obj=this,transition=obj[0].style.transition;void 0===transition||null===transition?obj.animate({left:x+"px"},duration,function(){callback&&callback(this_obj,obj)}):(obj.css({transition:"all "+.001*duration+"s linear",transform:"translateX("+x+"px)","-webkit-transform":"translateX("+x+"px)","-moz-transform":"translateX("+x+"px)","-o-transform":"translateX("+x+"px)","-ms-transform":"translateX("+x+"px)"}),callback&&setTimeout(function(){callback(this_obj,obj)},duration))},setFadeTo:function(obj,duration,callback){var this_obj=this,transition=obj[0].style.transition;void 0===transition||null===transition?obj.last().fadeOut(duration,function(){callback&&callback(this_obj,obj)}):(obj.css({transition:"opacity "+.001*duration+"s linear",opacity:0}),callback&&setTimeout(function(){callback&&callback(this_obj,obj)},duration))}}}!function(t,e){"function"==typeof define&&define.amd?define("lib/zepto.min",[],function(){return e(t)}):e(t)}(this,function(t){var e=function(){function A(t){return null==t?String(t):S[C.call(t)]||"object"}function $(t){return"function"==A(t)}function k(t){return null!=t&&t==t.window}function F(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function R(t){return"object"==A(t)}function Z(t){return R(t)&&!k(t)&&Object.getPrototypeOf(t)==Object.prototype}function q(t){var e=!!t&&"length"in t&&t.length,n=i.type(t);return"function"!=n&&!k(t)&&("array"==n||0===e||"number"==typeof e&&e>0&&e-1 in t)}function z(t){return a.call(t,function(t){return null!=t})}function _(t){return t.length>0?i.fn.concat.apply([],t):t}function I(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function X(t){return t in l?l[t]:l[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function H(t,e){return"number"!=typeof e||h[I(t)]?e:e+"px"}function U(t){var e,n;return c[t]||(e=f.createElement(t),f.body.appendChild(e),n=getComputedStyle(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),"none"==n&&(n="block"),c[t]=n),c[t]}function V(t){return"children"in t?u.call(t.children):i.map(t.childNodes,function(t){return 1==t.nodeType?t:void 0})}function Y(t,e){var n,i=t?t.length:0;for(n=0;i>n;n++)this[n]=t[n];this.length=i,this.selector=e||""}function B(t,i,r){for(n in i)r&&(Z(i[n])||L(i[n]))?(Z(i[n])&&!Z(t[n])&&(t[n]={}),L(i[n])&&!L(t[n])&&(t[n]=[]),B(t[n],i[n],r)):i[n]!==e&&(t[n]=i[n])}function J(t,e){return null==e?i(t):i(t).filter(e)}function W(t,e,n,i){return $(e)?e.call(t,n,i):e}function G(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function K(t,n){var i=t.className||"",r=i&&i.baseVal!==e;return n===e?r?i.baseVal:i:void(r?i.baseVal=n:t.className=n)}function Q(t){try{return t?"true"==t||("false"==t?!1:"null"==t?null:+t+""==t?+t:/^[\[\{]/.test(t)?i.parseJSON(t):t):t}catch(e){return t}}function tt(t,e){e(t);for(var n=0,i=t.childNodes.length;i>n;n++)tt(t.childNodes[n],e)}var e,n,i,r,P,O,o=[],s=o.concat,a=o.filter,u=o.slice,f=t.document,c={},l={},h={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},p=/^\s*<(\w+|!)[^>]*>/,d=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,m=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,g=/^(?:body|html)$/i,y=/([A-Z])/g,v=["val","css","html","text","data","width","height","offset"],x=["after","prepend","before","append"],b=f.createElement("table"),E=f.createElement("tr"),w={tr:f.createElement("tbody"),tbody:b,thead:b,tfoot:b,td:E,th:E,"*":f.createElement("div")},T=/complete|loaded|interactive/,j=/^[\w-]*$/,S={},C=S.toString,N={},M=f.createElement("div"),D={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},L=Array.isArray||function(t){return t instanceof Array};return N.matches=function(t,e){if(!e||!t||1!==t.nodeType)return!1;var n=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(n)return n.call(t,e);var i,r=t.parentNode,o=!r;return o&&(r=M).appendChild(t),i=~N.qsa(r,e).indexOf(t),o&&M.removeChild(t),i},P=function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},O=function(t){return a.call(t,function(e,n){return t.indexOf(e)==n})},N.fragment=function(t,n,r){var o,s,a;return d.test(t)&&(o=i(f.createElement(RegExp.$1))),o||(t.replace&&(t=t.replace(m,"<$1></$2>")),n===e&&(n=p.test(t)&&RegExp.$1),n in w||(n="*"),a=w[n],a.innerHTML=""+t,o=i.each(u.call(a.childNodes),function(){a.removeChild(this)})),Z(r)&&(s=i(o),i.each(r,function(t,e){v.indexOf(t)>-1?s[t](e):s.attr(t,e)})),o},N.Z=function(t,e){return new Y(t,e)},N.isZ=function(t){return t instanceof N.Z},N.init=function(t,n){var r;if(!t)return N.Z();if("string"==typeof t)if(t=t.trim(),"<"==t[0]&&p.test(t))r=N.fragment(t,RegExp.$1,n),t=null;else{if(n!==e)return i(n).find(t);r=N.qsa(f,t)}else{if($(t))return i(f).ready(t);if(N.isZ(t))return t;if(L(t))r=z(t);else if(R(t))r=[t],t=null;else if(p.test(t))r=N.fragment(t.trim(),RegExp.$1,n),t=null;else{if(n!==e)return i(n).find(t);r=N.qsa(f,t)}}return N.Z(r,t)},i=function(t,e){return N.init(t,e)},i.extend=function(t){var e,n=u.call(arguments,1);return"boolean"==typeof t&&(e=t,t=n.shift()),n.forEach(function(n){B(t,n,e)}),t},N.qsa=function(t,e){var n,i="#"==e[0],r=!i&&"."==e[0],o=i||r?e.slice(1):e,s=j.test(o);return t.getElementById&&s&&i?(n=t.getElementById(o))?[n]:[]:1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType?[]:u.call(s&&!i&&t.getElementsByClassName?r?t.getElementsByClassName(o):t.getElementsByTagName(e):t.querySelectorAll(e))},i.contains=f.documentElement.contains?function(t,e){return t!==e&&t.contains(e)}:function(t,e){for(;e&&(e=e.parentNode);)if(e===t)return!0;return!1},i.type=A,i.isFunction=$,i.isWindow=k,i.isArray=L,i.isPlainObject=Z,i.isEmptyObject=function(t){var e;for(e in t)return!1;return!0},i.isNumeric=function(t){var e=Number(t),n=typeof t;return null!=t&&"boolean"!=n&&("string"!=n||t.length)&&!isNaN(e)&&isFinite(e)||!1},i.inArray=function(t,e,n){return o.indexOf.call(e,t,n)},i.camelCase=P,i.trim=function(t){return null==t?"":String.prototype.trim.call(t)},i.uuid=0,i.support={},i.expr={},i.noop=function(){},i.map=function(t,e){var n,r,o,i=[];if(q(t))for(r=0;r<t.length;r++)n=e(t[r],r),null!=n&&i.push(n);else for(o in t)n=e(t[o],o),null!=n&&i.push(n);return _(i)},i.each=function(t,e){var n,i;if(q(t)){for(n=0;n<t.length;n++)if(e.call(t[n],n,t[n])===!1)return t}else for(i in t)if(e.call(t[i],i,t[i])===!1)return t;return t},i.grep=function(t,e){return a.call(t,e)},t.JSON&&(i.parseJSON=JSON.parse),i.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){S["[object "+e+"]"]=e.toLowerCase()}),i.fn={constructor:N.Z,length:0,forEach:o.forEach,reduce:o.reduce,push:o.push,sort:o.sort,splice:o.splice,indexOf:o.indexOf,concat:function(){var t,e,n=[];for(t=0;t<arguments.length;t++)e=arguments[t],n[t]=N.isZ(e)?e.toArray():e;return s.apply(N.isZ(this)?this.toArray():this,n)},map:function(t){return i(i.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return i(u.apply(this,arguments))},ready:function(t){return T.test(f.readyState)&&f.body?t(i):f.addEventListener("DOMContentLoaded",function(){t(i)},!1),this},get:function(t){return t===e?u.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(t){return o.every.call(this,function(e,n){return t.call(e,n,e)!==!1}),this},filter:function(t){return $(t)?this.not(this.not(t)):i(a.call(this,function(e){return N.matches(e,t)}))},add:function(t,e){return i(O(this.concat(i(t,e))))},is:function(t){return this.length>0&&N.matches(this[0],t)},not:function(t){var n=[];if($(t)&&t.call!==e)this.each(function(e){t.call(this,e)||n.push(this)});else{var r="string"==typeof t?this.filter(t):q(t)&&$(t.item)?u.call(t):i(t);this.forEach(function(t){r.indexOf(t)<0&&n.push(t)})}return i(n)},has:function(t){return this.filter(function(){return R(t)?i.contains(this,t):i(this).find(t).size()})},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!R(t)?t:i(t)},last:function(){var t=this[this.length-1];return t&&!R(t)?t:i(t)},find:function(t){var e,n=this;return e=t?"object"==typeof t?i(t).filter(function(){var t=this;return o.some.call(n,function(e){return i.contains(e,t)})}):1==this.length?i(N.qsa(this[0],t)):this.map(function(){return N.qsa(this,t)}):i()},closest:function(t,e){var n=[],r="object"==typeof t&&i(t);return this.each(function(i,o){for(;o&&!(r?r.indexOf(o)>=0:N.matches(o,t));)o=o!==e&&!F(o)&&o.parentNode;o&&n.indexOf(o)<0&&n.push(o)}),i(n)},parents:function(t){for(var e=[],n=this;n.length>0;)n=i.map(n,function(t){return(t=t.parentNode)&&!F(t)&&e.indexOf(t)<0?(e.push(t),t):void 0});return J(e,t)},parent:function(t){return J(O(this.pluck("parentNode")),t)},children:function(t){return J(this.map(function(){return V(this)}),t)},contents:function(){return this.map(function(){return this.contentDocument||u.call(this.childNodes)})},siblings:function(t){return J(this.map(function(t,e){return a.call(V(e.parentNode),function(t){return t!==e})}),t)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(t){return i.map(this,function(e){return e[t]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=U(this.nodeName))})},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var e=$(t);if(this[0]&&!e)var n=i(t).get(0),r=n.parentNode||this.length>1;return this.each(function(o){i(this).wrapAll(e?t.call(this,o):r?n.cloneNode(!0):n)})},wrapAll:function(t){if(this[0]){i(this[0]).before(t=i(t));for(var e;(e=t.children()).length;)t=e.first();i(t).append(this)}return this},wrapInner:function(t){var e=$(t);return this.each(function(n){var r=i(this),o=r.contents(),s=e?t.call(this,n):t;o.length?o.wrapAll(s):r.append(s)})},unwrap:function(){return this.parent().each(function(){i(this).replaceWith(i(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)
})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var n=i(this);(t===e?"none"==n.css("display"):t)?n.show():n.hide()})},prev:function(t){return i(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return i(this.pluck("nextElementSibling")).filter(t||"*")},html:function(t){return 0 in arguments?this.each(function(e){var n=this.innerHTML;i(this).empty().append(W(this,t,e,n))}):0 in this?this[0].innerHTML:null},text:function(t){return 0 in arguments?this.each(function(e){var n=W(this,t,e,this.textContent);this.textContent=null==n?"":""+n}):0 in this?this.pluck("textContent").join(""):null},attr:function(t,i){var r;return"string"!=typeof t||1 in arguments?this.each(function(e){if(1===this.nodeType)if(R(t))for(n in t)G(this,n,t[n]);else G(this,t,W(this,i,e,this.getAttribute(t)))}):0 in this&&1==this[0].nodeType&&null!=(r=this[0].getAttribute(t))?r:e},removeAttr:function(t){return this.each(function(){1===this.nodeType&&t.split(" ").forEach(function(t){G(this,t)},this)})},prop:function(t,e){return t=D[t]||t,1 in arguments?this.each(function(n){this[t]=W(this,e,n,this[t])}):this[0]&&this[0][t]},removeProp:function(t){return t=D[t]||t,this.each(function(){delete this[t]})},data:function(t,n){var i="data-"+t.replace(y,"-$1").toLowerCase(),r=1 in arguments?this.attr(i,n):this.attr(i);return null!==r?Q(r):e},val:function(t){return 0 in arguments?(null==t&&(t=""),this.each(function(e){this.value=W(this,t,e,this.value)})):this[0]&&(this[0].multiple?i(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(e){if(e)return this.each(function(t){var n=i(this),r=W(this,e,t,n.offset()),o=n.offsetParent().offset(),s={top:r.top-o.top,left:r.left-o.left};"static"==n.css("position")&&(s.position="relative"),n.css(s)});if(!this.length)return null;if(f.documentElement!==this[0]&&!i.contains(f.documentElement,this[0]))return{top:0,left:0};var n=this[0].getBoundingClientRect();return{left:n.left+t.pageXOffset,top:n.top+t.pageYOffset,width:Math.round(n.width),height:Math.round(n.height)}},css:function(t,e){if(arguments.length<2){var r=this[0];if("string"==typeof t){if(!r)return;return r.style[P(t)]||getComputedStyle(r,"").getPropertyValue(t)}if(L(t)){if(!r)return;var o={},s=getComputedStyle(r,"");return i.each(t,function(t,e){o[e]=r.style[P(e)]||s.getPropertyValue(e)}),o}}var a="";if("string"==A(t))e||0===e?a=I(t)+":"+H(t,e):this.each(function(){this.style.removeProperty(I(t))});else for(n in t)t[n]||0===t[n]?a+=I(n)+":"+H(n,t[n])+";":this.each(function(){this.style.removeProperty(I(n))});return this.each(function(){this.style.cssText+=";"+a})},index:function(t){return t?this.indexOf(i(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){return t?o.some.call(this,function(t){return this.test(K(t))},X(t)):!1},addClass:function(t){return t?this.each(function(e){if("className"in this){r=[];var n=K(this),o=W(this,t,e,n);o.split(/\s+/g).forEach(function(t){i(this).hasClass(t)||r.push(t)},this),r.length&&K(this,n+(n?" ":"")+r.join(" "))}}):this},removeClass:function(t){return this.each(function(n){if("className"in this){if(t===e)return K(this,"");r=K(this),W(this,t,n,r).split(/\s+/g).forEach(function(t){r=r.replace(X(t)," ")}),K(this,r.trim())}})},toggleClass:function(t,n){return t?this.each(function(r){var o=i(this),s=W(this,t,r,K(this));s.split(/\s+/g).forEach(function(t){(n===e?!o.hasClass(t):n)?o.addClass(t):o.removeClass(t)})}):this},scrollTop:function(t){if(this.length){var n="scrollTop"in this[0];return t===e?n?this[0].scrollTop:this[0].pageYOffset:this.each(n?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var n="scrollLeft"in this[0];return t===e?n?this[0].scrollLeft:this[0].pageXOffset:this.each(n?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var t=this[0],e=this.offsetParent(),n=this.offset(),r=g.test(e[0].nodeName)?{top:0,left:0}:e.offset();return n.top-=parseFloat(i(t).css("margin-top"))||0,n.left-=parseFloat(i(t).css("margin-left"))||0,r.top+=parseFloat(i(e[0]).css("border-top-width"))||0,r.left+=parseFloat(i(e[0]).css("border-left-width"))||0,{top:n.top-r.top,left:n.left-r.left}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||f.body;t&&!g.test(t.nodeName)&&"static"==i(t).css("position");)t=t.offsetParent;return t})}},i.fn.detach=i.fn.remove,["width","height"].forEach(function(t){var n=t.replace(/./,function(t){return t[0].toUpperCase()});i.fn[t]=function(r){var o,s=this[0];return r===e?k(s)?s["inner"+n]:F(s)?s.documentElement["scroll"+n]:(o=this.offset())&&o[t]:this.each(function(e){s=i(this),s.css(t,W(this,r,e,s[t]()))})}}),x.forEach(function(n,r){var o=r%2;i.fn[n]=function(){var n,a,s=i.map(arguments,function(t){var r=[];return n=A(t),"array"==n?(t.forEach(function(t){return t.nodeType!==e?r.push(t):i.zepto.isZ(t)?r=r.concat(t.get()):void(r=r.concat(N.fragment(t)))}),r):"object"==n||null==t?t:N.fragment(t)}),u=this.length>1;return s.length<1?this:this.each(function(e,n){a=o?n:n.parentNode,n=0==r?n.nextSibling:1==r?n.firstChild:2==r?n:null;var c=i.contains(f.documentElement,a);s.forEach(function(e){if(u)e=e.cloneNode(!0);else if(!a)return i(e).remove();a.insertBefore(e,n),c&&tt(e,function(e){if(!(null==e.nodeName||"SCRIPT"!==e.nodeName.toUpperCase()||e.type&&"text/javascript"!==e.type||e.src)){var n=e.ownerDocument?e.ownerDocument.defaultView:t;n.eval.call(n,e.innerHTML)}})})})},i.fn[o?n+"To":"insert"+(r?"Before":"After")]=function(t){return i(t)[n](this),this}}),N.Z.prototype=Y.prototype=i.fn,N.uniq=O,N.deserializeValue=Q,i.zepto=N,i}();return t.Zepto=e,void 0===t.$&&(t.$=e),function(e){function h(t){return t._zid||(t._zid=n++)}function p(t,e,n,i){if(e=d(e),e.ns)var r=m(e.ns);return(a[h(t)]||[]).filter(function(t){return!(!t||e.e&&t.e!=e.e||e.ns&&!r.test(t.ns)||n&&h(t.fn)!==h(n)||i&&t.sel!=i)})}function d(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function m(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function g(t,e){return t.del&&!f&&t.e in c||!!e}function y(t){return l[t]||f&&c[t]||t}function v(t,n,r,o,s,u,f){var c=h(t),p=a[c]||(a[c]=[]);n.split(/\s/).forEach(function(n){if("ready"==n)return e(document).ready(r);var a=d(n);a.fn=r,a.sel=s,a.e in l&&(r=function(t){var n=t.relatedTarget;return!n||n!==this&&!e.contains(this,n)?a.fn.apply(this,arguments):void 0}),a.del=u;var c=u||r;a.proxy=function(e){if(e=j(e),!e.isImmediatePropagationStopped()){e.data=o;var n=c.apply(t,e._args==i?[e]:[e].concat(e._args));return n===!1&&(e.preventDefault(),e.stopPropagation()),n}},a.i=p.length,p.push(a),"addEventListener"in t&&t.addEventListener(y(a.e),a.proxy,g(a,f))})}function x(t,e,n,i,r){var o=h(t);(e||"").split(/\s/).forEach(function(e){p(t,e,n,i).forEach(function(e){delete a[o][e.i],"removeEventListener"in t&&t.removeEventListener(y(e.e),e.proxy,g(e,r))})})}function j(t,n){return(n||!t.isDefaultPrevented)&&(n||(n=t),e.each(T,function(e,i){var r=n[e];t[e]=function(){return this[i]=b,r&&r.apply(n,arguments)},t[i]=E}),t.timeStamp||(t.timeStamp=Date.now()),(n.defaultPrevented!==i?n.defaultPrevented:"returnValue"in n?n.returnValue===!1:n.getPreventDefault&&n.getPreventDefault())&&(t.isDefaultPrevented=b)),t}function S(t){var e,n={originalEvent:t};for(e in t)w.test(e)||t[e]===i||(n[e]=t[e]);return j(n,t)}var i,n=1,r=Array.prototype.slice,o=e.isFunction,s=function(t){return"string"==typeof t},a={},u={},f="onfocusin"in t,c={focus:"focusin",blur:"focusout"},l={mouseenter:"mouseover",mouseleave:"mouseout"};u.click=u.mousedown=u.mouseup=u.mousemove="MouseEvents",e.event={add:v,remove:x},e.proxy=function(t,n){var i=2 in arguments&&r.call(arguments,2);if(o(t)){var a=function(){return t.apply(n,i?i.concat(r.call(arguments)):arguments)};return a._zid=h(t),a}if(s(n))return i?(i.unshift(t[n],t),e.proxy.apply(null,i)):e.proxy(t[n],t);throw new TypeError("expected function")},e.fn.bind=function(t,e,n){return this.on(t,e,n)},e.fn.unbind=function(t,e){return this.off(t,e)},e.fn.one=function(t,e,n,i){return this.on(t,e,n,i,1)};var b=function(){return!0},E=function(){return!1},w=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,T={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};e.fn.delegate=function(t,e,n){return this.on(e,t,n)},e.fn.undelegate=function(t,e,n){return this.off(e,t,n)},e.fn.live=function(t,n){return e(document.body).delegate(this.selector,t,n),this},e.fn.die=function(t,n){return e(document.body).undelegate(this.selector,t,n),this},e.fn.on=function(t,n,a,u,f){var c,l,h=this;return t&&!s(t)?(e.each(t,function(t,e){h.on(t,n,a,e,f)}),h):(s(n)||o(u)||u===!1||(u=a,a=n,n=i),(u===i||a===!1)&&(u=a,a=i),u===!1&&(u=E),h.each(function(i,o){f&&(c=function(t){return x(o,t.type,u),u.apply(this,arguments)}),n&&(l=function(t){var i,s=e(t.target).closest(n,o).get(0);return s&&s!==o?(i=e.extend(S(t),{currentTarget:s,liveFired:o}),(c||u).apply(s,[i].concat(r.call(arguments,1)))):void 0}),v(o,t,u,a,n,l||c)}))},e.fn.off=function(t,n,r){var a=this;return t&&!s(t)?(e.each(t,function(t,e){a.off(t,n,e)}),a):(s(n)||o(r)||r===!1||(r=n,n=i),r===!1&&(r=E),a.each(function(){x(this,t,r,n)}))},e.fn.trigger=function(t,n){return t=s(t)||e.isPlainObject(t)?e.Event(t):j(t),t._args=n,this.each(function(){t.type in c&&"function"==typeof this[t.type]?this[t.type]():"dispatchEvent"in this?this.dispatchEvent(t):e(this).triggerHandler(t,n)})},e.fn.triggerHandler=function(t,n){var i,r;return this.each(function(o,a){i=S(s(t)?e.Event(t):t),i._args=n,i.target=a,e.each(p(a,t.type||t),function(t,e){return r=e.proxy(i),i.isImmediatePropagationStopped()?!1:void 0})}),r},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(t){e.fn[t]=function(e){return 0 in arguments?this.bind(t,e):this.trigger(t)}}),e.Event=function(t,e){s(t)||(e=t,t=e.type);var n=document.createEvent(u[t]||"Events"),i=!0;if(e)for(var r in e)"bubbles"==r?i=!!e[r]:n[r]=e[r];return n.initEvent(t,i,!0),j(n)}}(e),function(e){function p(t,n,i){var r=e.Event(n);return e(t).trigger(r,i),!r.isDefaultPrevented()}function d(t,e,n,r){return t.global?p(e||i,n,r):void 0}function m(t){t.global&&0===e.active++&&d(t,null,"ajaxStart")}function g(t){t.global&&!--e.active&&d(t,null,"ajaxStop")}function y(t,e){var n=e.context;return e.beforeSend.call(n,t,e)===!1||d(e,n,"ajaxBeforeSend",[t,e])===!1?!1:void d(e,n,"ajaxSend",[t,e])}function v(t,e,n,i){var r=n.context,o="success";n.success.call(r,t,o,e),i&&i.resolveWith(r,[t,o,e]),d(n,r,"ajaxSuccess",[e,n,t]),b(o,e,n)}function x(t,e,n,i,r){var o=i.context;i.error.call(o,n,e,t),r&&r.rejectWith(o,[n,e,t]),d(i,o,"ajaxError",[n,i,t||e]),b(e,n,i)}function b(t,e,n){var i=n.context;n.complete.call(i,e,t),d(n,i,"ajaxComplete",[e,n]),g(n)}function E(t,e,n){if(n.dataFilter==w)return t;var i=n.context;return n.dataFilter.call(i,t,e)}function w(){}function T(t){return t&&(t=t.split(";",2)[0]),t&&(t==c?"html":t==f?"json":a.test(t)?"script":u.test(t)&&"xml")||"text"}function j(t,e){return""==e?t:(t+"&"+e).replace(/[&?]{1,2}/,"?")}function S(t){t.processData&&t.data&&"string"!=e.type(t.data)&&(t.data=e.param(t.data,t.traditional)),!t.data||t.type&&"GET"!=t.type.toUpperCase()&&"jsonp"!=t.dataType||(t.url=j(t.url,t.data),t.data=void 0)}function C(t,n,i,r){return e.isFunction(n)&&(r=i,i=n,n=void 0),e.isFunction(i)||(r=i,i=void 0),{url:t,data:n,success:i,dataType:r}}function P(t,n,i,r){var o,s=e.isArray(n),a=e.isPlainObject(n);e.each(n,function(n,u){o=e.type(u),r&&(n=i?r:r+"["+(a||"object"==o||"array"==o?n:"")+"]"),!r&&s?t.add(u.name,u.value):"array"==o||!i&&"object"==o?P(t,u,i,n):t.add(n,u)})}var r,o,n=+new Date,i=t.document,s=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,a=/^(?:text|application)\/javascript/i,u=/^(?:text|application)\/xml/i,f="application/json",c="text/html",l=/^\s*$/,h=i.createElement("a");h.href=t.location.href,e.active=0,e.ajaxJSONP=function(r,o){if(!("type"in r))return e.ajax(r);var c,p,s=r.jsonpCallback,a=(e.isFunction(s)?s():s)||"Zepto"+n++,u=i.createElement("script"),f=t[a],l=function(t){e(u).triggerHandler("error",t||"abort")},h={abort:l};return o&&o.promise(h),e(u).on("load error",function(n,i){clearTimeout(p),e(u).off().remove(),"error"!=n.type&&c?v(c[0],h,r,o):x(null,i||"error",h,r,o),t[a]=f,c&&e.isFunction(f)&&f(c[0]),f=c=void 0}),y(h,r)===!1?(l("abort"),h):(t[a]=function(){c=arguments},u.src=r.url.replace(/\?(.+)=\?/,"?$1="+a),i.head.appendChild(u),r.timeout>0&&(p=setTimeout(function(){l("timeout")},r.timeout)),h)},e.ajaxSettings={type:"GET",beforeSend:w,success:w,error:w,complete:w,context:null,global:!0,xhr:function(){return new t.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:f,xml:"application/xml, text/xml",html:c,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0,dataFilter:w},e.ajax=function(n){var u,f,s=e.extend({},n||{}),a=e.Deferred&&e.Deferred();for(r in e.ajaxSettings)void 0===s[r]&&(s[r]=e.ajaxSettings[r]);m(s),s.crossDomain||(u=i.createElement("a"),u.href=s.url,u.href=u.href,s.crossDomain=h.protocol+"//"+h.host!=u.protocol+"//"+u.host),s.url||(s.url=t.location.toString()),(f=s.url.indexOf("#"))>-1&&(s.url=s.url.slice(0,f)),S(s);var c=s.dataType,p=/\?.+=\?/.test(s.url);if(p&&(c="jsonp"),s.cache!==!1&&(n&&n.cache===!0||"script"!=c&&"jsonp"!=c)||(s.url=j(s.url,"_="+Date.now())),"jsonp"==c)return p||(s.url=j(s.url,s.jsonp?s.jsonp+"=?":s.jsonp===!1?"":"callback=?")),e.ajaxJSONP(s,a);var O,d=s.accepts[c],g={},b=function(t,e){g[t.toLowerCase()]=[t,e]},C=/^([\w-]+:)\/\//.test(s.url)?RegExp.$1:t.location.protocol,N=s.xhr(),P=N.setRequestHeader;if(a&&a.promise(N),s.crossDomain||b("X-Requested-With","XMLHttpRequest"),b("Accept",d||"*/*"),(d=s.mimeType||d)&&(d.indexOf(",")>-1&&(d=d.split(",",2)[0]),N.overrideMimeType&&N.overrideMimeType(d)),(s.contentType||s.contentType!==!1&&s.data&&"GET"!=s.type.toUpperCase())&&b("Content-Type",s.contentType||"application/x-www-form-urlencoded"),s.headers)for(o in s.headers)b(o,s.headers[o]);if(N.setRequestHeader=b,N.onreadystatechange=function(){if(4==N.readyState){N.onreadystatechange=w,clearTimeout(O);var t,n=!1;if(N.status>=200&&N.status<300||304==N.status||0==N.status&&"file:"==C){if(c=c||T(s.mimeType||N.getResponseHeader("content-type")),"arraybuffer"==N.responseType||"blob"==N.responseType)t=N.response;else{t=N.responseText;try{t=E(t,c,s),"script"==c?(1,eval)(t):"xml"==c?t=N.responseXML:"json"==c&&(t=l.test(t)?null:e.parseJSON(t))}catch(i){n=i}if(n)return x(n,"parsererror",N,s,a)}v(t,N,s,a)}else x(N.statusText||null,N.status?"error":"abort",N,s,a)}},y(N,s)===!1)return N.abort(),x(null,"abort",N,s,a),N;var M="async"in s?s.async:!0;if(N.open(s.type,s.url,M,s.username,s.password),s.xhrFields)for(o in s.xhrFields)N[o]=s.xhrFields[o];for(o in g)P.apply(N,g[o]);return s.timeout>0&&(O=setTimeout(function(){N.onreadystatechange=w,N.abort(),x(null,"timeout",N,s,a)},s.timeout)),N.send(s.data?s.data:null),N},e.get=function(){return e.ajax(C.apply(null,arguments))},e.post=function(){var t=C.apply(null,arguments);return t.type="POST",e.ajax(t)},e.getJSON=function(){var t=C.apply(null,arguments);return t.dataType="json",e.ajax(t)},e.fn.load=function(t,n,i){if(!this.length)return this;var a,r=this,o=t.split(/\s/),u=C(t,n,i),f=u.success;return o.length>1&&(u.url=o[0],a=o[1]),u.success=function(t){r.html(a?e("<div>").html(t.replace(s,"")).find(a):t),f&&f.apply(r,arguments)},e.ajax(u),this};var N=encodeURIComponent;e.param=function(t,n){var i=[];return i.add=function(t,n){e.isFunction(n)&&(n=n()),null==n&&(n=""),this.push(N(t)+"="+N(n))},P(i,t,n),i.join("&").replace(/%20/g,"+")}}(e),function(t){t.fn.serializeArray=function(){var e,n,i=[],r=function(t){return t.forEach?t.forEach(r):void i.push({name:e,value:t})};return this[0]&&t.each(this[0].elements,function(i,o){n=o.type,e=o.name,e&&"fieldset"!=o.nodeName.toLowerCase()&&!o.disabled&&"submit"!=n&&"reset"!=n&&"button"!=n&&"file"!=n&&("radio"!=n&&"checkbox"!=n||o.checked)&&r(t(o).val())}),i},t.fn.serialize=function(){var t=[];return this.serializeArray().forEach(function(e){t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))}),t.join("&")},t.fn.submit=function(e){if(0 in arguments)this.bind("submit",e);else if(this.length){var n=t.Event("submit");this.eq(0).trigger(n),n.isDefaultPrevented()||this.get(0).submit()}return this}}(e),function(t,e){function y(t){return t.replace(/([A-Z])/g,"-$1").toLowerCase()}function v(t){return i?i+t:t.toLowerCase()}var i,a,u,f,c,l,h,p,d,m,n="",r={Webkit:"webkit",Moz:"",O:"o"},o=document.createElement("div"),s=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,g={};o.style.transform===e&&t.each(r,function(t,r){return o.style[t+"TransitionProperty"]!==e?(n="-"+t.toLowerCase()+"-",i=r,!1):void 0}),a=n+"transform",g[u=n+"transition-property"]=g[f=n+"transition-duration"]=g[l=n+"transition-delay"]=g[c=n+"transition-timing-function"]=g[h=n+"animation-name"]=g[p=n+"animation-duration"]=g[m=n+"animation-delay"]=g[d=n+"animation-timing-function"]="",t.fx={off:i===e&&o.style.transitionProperty===e,speeds:{_default:400,fast:200,slow:600},cssPrefix:n,transitionEnd:v("TransitionEnd"),animationEnd:v("AnimationEnd")},t.fn.animate=function(n,i,r,o,s){return t.isFunction(i)&&(o=i,r=e,i=e),t.isFunction(r)&&(o=r,r=e),t.isPlainObject(i)&&(r=i.easing,o=i.complete,s=i.delay,i=i.duration),i&&(i=("number"==typeof i?i:t.fx.speeds[i]||t.fx.speeds._default)/1e3),s&&(s=parseFloat(s)/1e3),this.anim(n,i,r,o,s)},t.fn.anim=function(n,i,r,o,v){var x,E,j,b={},w="",T=this,S=t.fx.transitionEnd,C=!1;if(i===e&&(i=t.fx.speeds._default/1e3),v===e&&(v=0),t.fx.off&&(i=0),"string"==typeof n)b[h]=n,b[p]=i+"s",b[m]=v+"s",b[d]=r||"linear",S=t.fx.animationEnd;else{E=[];for(x in n)s.test(x)?w+=x+"("+n[x]+") ":(b[x]=n[x],E.push(y(x)));w&&(b[a]=w,E.push(a)),i>0&&"object"==typeof n&&(b[u]=E.join(", "),b[f]=i+"s",b[l]=v+"s",b[c]=r||"linear")}return j=function(e){if("undefined"!=typeof e){if(e.target!==e.currentTarget)return;t(e.target).unbind(S,j)}else t(this).unbind(S,j);C=!0,t(this).css(g),o&&o.call(this)},i>0&&(this.bind(S,j),setTimeout(function(){C||j.call(T)},1e3*(i+v)+25)),this.size()&&this.get(0).clientLeft,this.css(b),0>=i&&setTimeout(function(){T.each(function(){j.call(this)})},0),this},o=null}(e),function(e,n){function u(t,i,r,o,s){"function"!=typeof i||s||(s=i,i=n);var a={opacity:r};return o&&(a.scale=o,t.css(e.fx.cssPrefix+"transform-origin","0 0")),t.animate(a,i,null,s)}function f(t,n,i,r){return u(t,n,0,i,function(){s.call(e(this)),r&&r.call(this)})}var i=t.document,o=(i.documentElement,e.fn.show),s=e.fn.hide,a=e.fn.toggle;e.fn.show=function(t,e){return o.call(this),t===n?t=0:this.css("opacity",0),u(this,t,1,"1,1",e)},e.fn.hide=function(t,e){return t===n?s.call(this):f(this,t,"0,0",e)},e.fn.toggle=function(t,i){return t===n||"boolean"==typeof t?a.call(this,t):this.each(function(){var n=e(this);n["none"==n.css("display")?"show":"hide"](t,i)})},e.fn.fadeTo=function(t,e,n){return u(this,t,e,null,n)},e.fn.fadeIn=function(t,e){var n=this.css("opacity");return n>0?this.css("opacity",0):n=1,o.call(this).fadeTo(t,n,e)},e.fn.fadeOut=function(t,e){return f(this,t,null,e)},e.fn.fadeToggle=function(t,n){return this.each(function(){var i=e(this);i[0==i.css("opacity")||"none"==i.css("display")?"fadeIn":"fadeOut"](t,n)})}}(e),function(t){function r(e){return e=t(e),!(!e.width()&&!e.height())&&"none"!==e.css("display")}function f(t,e){t=t.replace(/=#\]/g,'="#"]');var n,i,r=s.exec(t);if(r&&r[2]in o&&(n=o[r[2]],i=r[3],t=r[1],i)){var a=Number(i);i=isNaN(a)?i.replace(/^["']|["']$/g,""):a}return e(t,n,i)}var e=t.zepto,n=e.qsa,i=e.matches,o=t.expr[":"]={visible:function(){return r(this)?this:void 0},hidden:function(){return r(this)?void 0:this},selected:function(){return this.selected?this:void 0},checked:function(){return this.checked?this:void 0},parent:function(){return this.parentNode},first:function(t){return 0===t?this:void 0},last:function(t,e){return t===e.length-1?this:void 0},eq:function(t,e,n){return t===n?this:void 0},contains:function(e,n,i){return t(this).text().indexOf(i)>-1?this:void 0},has:function(t,n,i){return e.qsa(this,i).length?this:void 0}},s=new RegExp("(.*):(\\w+)(?:\\(([^)]+)\\))?$\\s*"),a=/^\s*>/,u="Zepto"+ +new Date;e.qsa=function(i,r){return f(r,function(o,s,f){try{var c;!o&&s?o="*":a.test(o)&&(c=t(i).addClass(u),o="."+u+" "+o);var l=n(i,o)}catch(h){throw console.error("error performing selector: %o",r),h}finally{c&&c.removeClass(u)}return s?e.uniq(t.map(l,function(t,e){return s.call(t,e,l,f)})):l})},e.matches=function(t,e){return f(e,function(e,n,r){return!(e&&!i(t,e)||n&&n.call(t,null,r)!==t)})}}(e),function(e){function f(t,e,n,i){return Math.abs(t-e)>=Math.abs(n-i)?t-e>0?"Left":"Right":n-i>0?"Up":"Down"}function c(){s=null,n.last&&(n.el.trigger("longTap"),n={})}function l(){s&&clearTimeout(s),s=null}function h(){i&&clearTimeout(i),r&&clearTimeout(r),o&&clearTimeout(o),s&&clearTimeout(s),i=r=o=s=null,n={}}function p(t){return("touch"==t.pointerType||t.pointerType==t.MSPOINTER_TYPE_TOUCH)&&t.isPrimary}function d(t,e){return t.type=="pointer"+e||t.type.toLowerCase()=="mspointer"+e}var i,r,o,s,u,n={},a=750;e(document).ready(function(){var m,g,x,b,y=0,v=0;"MSGesture"in t&&(u=new MSGesture,u.target=document.body),e(document).bind("MSGestureEnd",function(t){var e=t.velocityX>1?"Right":t.velocityX<-1?"Left":t.velocityY>1?"Down":t.velocityY<-1?"Up":null;e&&(n.el.trigger("swipe"),n.el.trigger("swipe"+e))}).on("touchstart MSPointerDown pointerdown",function(t){(!(b=d(t,"down"))||p(t))&&(x=b?t:t.touches[0],t.touches&&1===t.touches.length&&n.x2&&(n.x2=void 0,n.y2=void 0),m=Date.now(),g=m-(n.last||m),n.el=e("tagName"in x.target?x.target:x.target.parentNode),i&&clearTimeout(i),n.x1=x.pageX,n.y1=x.pageY,g>0&&250>=g&&(n.isDoubleTap=!0),n.last=m,s=setTimeout(c,a),u&&b&&u.addPointer(t.pointerId))}).on("touchmove MSPointerMove pointermove",function(t){(!(b=d(t,"move"))||p(t))&&(x=b?t:t.touches[0],l(),n.x2=x.pageX,n.y2=x.pageY,y+=Math.abs(n.x1-n.x2),v+=Math.abs(n.y1-n.y2))}).on("touchend MSPointerUp pointerup",function(t){(!(b=d(t,"up"))||p(t))&&(l(),n.x2&&Math.abs(n.x1-n.x2)>30||n.y2&&Math.abs(n.y1-n.y2)>30?o=setTimeout(function(){n.el&&(n.el.trigger("swipe"),n.el.trigger("swipe"+f(n.x1,n.x2,n.y1,n.y2))),n={}},0):"last"in n&&(30>y&&30>v?r=setTimeout(function(){var t=e.Event("tap");t.cancelTouch=h,n.el&&n.el.trigger(t),n.isDoubleTap?(n.el&&n.el.trigger("doubleTap"),n={}):i=setTimeout(function(){i=null,n.el&&n.el.trigger("singleTap"),n={}},250)},0):n={}),y=v=0)}).on("touchcancel MSPointerCancel pointercancel",h),e(t).on("scroll",h)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(t){e.fn[t]=function(e){return this.on(t,e)}})}(e),function(){try{getComputedStyle(void 0)}catch(e){var n=getComputedStyle;t.getComputedStyle=function(t,e){try{return n(t,e)}catch(i){return null}}}}(),e});var mobile_stop_moved={init:function(opt){var opt_default={selector:"",scroll:!0,resize_toWindow:!0};if(opt=$.extend(opt_default,opt),$(window).on("touchmove",function(e){e.preventDefault(),e.stopPropagation()}),opt.scroll){var obj=$(opt.selector);obj.css("overflow","scroll").css({"-webkit-overflow-scrolling":"touch","overflow-scrolling":"touch","overflow-x":"hidden"});var clientY_start;$(window).unbind().on("touchstart",function(e){var touches=e.touches||e.originalEvent.touches;clientY_start=touches[0].clientY}),$(window).unbind("touchmove").on("touchmove",function(e){var scrollHeight=obj[0].scrollHeight,offsetHeight=obj.height(),scrollTop=obj.scrollTop(),touches=e.touches||e.originalEvent.touches,clientY_now=touches[0].clientY,canScroll=!0,neednt=offsetHeight>=scrollHeight,topest=0===scrollTop&&clientY_now>clientY_start,bottemest=scrollTop+offsetHeight>=scrollHeight&&clientY_start>clientY_now;(neednt||topest||bottemest)&&(canScroll=!1),canScroll||(e.preventDefault(),e.stopPropagation())})}if(opt.resize_toWindow){var orientation,orientation_old=window.orientation,window_size_px={width:window.innerWidth-(screen.height-window.innerHeight),height:window.innerHeight},resize_n=0,resize_do=function(){++resize_n%2!==0&&(setTimeout(function(){orientation=window.orientation,orientation==orientation_old?$(opt.selector).css("height",window_size_px.height+"px"):$(opt.selector).css("height",window_size_px.width+"px"),resize_n=0},0),setTimeout(function(){var innerHeight_px=window.innerHeight;orientation==orientation_old?window_size_px.height=innerHeight_px:window_size_px.width=innerHeight_px,$(opt.selector).css("height",innerHeight_px+"px")},500))};resize_do(),$(window).resize(function(){resize_do()})}}};"function"==typeof define&&define.amd&&define("lib/mobile_stop_moved",[],function(){return mobile_stop_moved});var landscape_mask={init:function(){landscape_mask.includeCSS("/inc/landscape_mask.min.css");var tag_str='<section class="landscape_mask"><div class="mod_div"><img src="/inc/landscape_mask.png" /><p></p></div></section>';$("body").append(tag_str);var _selector=$("section.landscape_mask");$("p.a").html("0");var changeDo=function(){var window_height_px=$(window).height();_selector.css("height",window_height_px+"px"),$("p.a").html($("p.a").html()+"<br />32:"+window.orientation)},resize_n=0;$(window).resize(function(){return $("p.a").html($("p.a").html()+"<br />39:window-"+window.orientation),0==window.orientation?void _selector.removeClass("landscape_mask_show"):(_selector.hasClass("landscape_mask_show")||_selector.addClass("landscape_mask_show"),$("input,select").blur(),void(resize_n++>0||setTimeout(function(){changeDo(),resize_n=0},0)))})},includeCSS:function(path){var a=document.createElement("link");a.type="text/css",a.rel="stylesheet",a.href=path;var head=document.getElementsByTagName("head")[0];head.appendChild(a)}};"function"==typeof define&&define.amd?define("lib/landscape_mask",[],function(){return landscape_mask}):landscape_mask.init(),define("modules/mobile_end_init",["lib/mobile_stop_moved","lib/landscape_mask"],function($mobile_stop_moved,$landscape_mask){var opt={selector:"div.stoped_wrapper",scroll:!0,resize_toWindow:!0};$mobile_stop_moved.init(opt),$landscape_mask.init()});var functions={init:function(){$(function(){$(".li_touchstart").on("touchstart mousedown",function(e){e.preventDefault(),functions.li_click($(this))}),$(".li_click").on("click",function(){functions.li_click($(this))})})},convers:function(str){var result=str,regExp=new RegExp("'","ig");return result=result.replace(regExp,"&acute;"),regExp=new RegExp("<","ig"),result=result.replace(regExp,"&lt;"),regExp=new RegExp('"',"ig"),result=result.replace(regExp,"&quot;")},dateFormat_wx:function(_date){var date=new Date(_date),year=date.getFullYear(),month=date.getMonth()+1,day=date.getDate(),hour=date.getHours(),minute=date.getMinutes(),str="";return date=new Date,date.getFullYear()==year&&date.getMonth()+1==month&&date.getDate()==day?str="":(str=year+"",str+=month+"",str+=day+" "),10>hour&&(str+="0"),str+=hour+":",10>minute&&(str+="0"),str+=minute},fix_ios_fixed_bottom_input:function(dom_selector,autocheck){autocheck=autocheck||!1;var regExp=new RegExp(/.+os (\w+?)_\w+_\w+ like mac os x.+ /gi),iosEdition=regExp.exec(navigator.userAgent);if(iosEdition){iosEdition=parseInt(iosEdition[1]);var interval,window_innerHeight_px,_window_innerHeight_px,footer_input=$(dom_selector),exec=function(){_window_innerHeight_px=window.innerHeight,(window_innerHeight_px!=_window_innerHeight_px||11>iosEdition)&&(document.body.scrollTop=document.body.scrollHeight,window_innerHeight_px=_window_innerHeight_px)},focus_handler=function(){window_innerHeight_px=0,interval=setInterval(function(){exec()},1e3)};footer_input.on("focus",focus_handler),footer_input.on("blur",function(){clearInterval(interval)}),autocheck&&focus_handler()}},calculate:function(kind,cal1,cal2){cal1=cal1||1,cal2=cal2||1;var i,lastDealNum=0,str1=cal1.toString(),str2=cal2.toString(),str_lastDealNum="1",get_lastDealNum=function(str){return i=str.indexOf("."),-1==i?0:str.length-i-1};for(lastDealNum+=get_lastDealNum(str1),lastDealNum+=get_lastDealNum(str2),i=0;lastDealNum>i;i++)str_lastDealNum+="0";switch(kind){case 1:return parseFloat(str1.replace(".",""))*parseFloat(str2.replace(".",""))/parseFloat(str_lastDealNum);case 2:return parseFloat(str1.replace(".",""))/parseFloat(str2.replace(".",""))/parseFloat(str_lastDealNum);default:return 0}},scrollTop:function(opt){var opt_default={obj_selector:window,toTop_px:0,durTime_ms:200};opt=$.extend(opt_default,opt),"window"===opt.obj_selector&&(opt.obj_selector=window);var perTime=20,scrollTop_selector=opt.obj_selector==window?"html,body":opt.obj_selector,obj=$(scrollTop_selector),top_now_px=obj.scrollTop(),top_per_px=(opt.toTop_px-top_now_px)/opt.durTime_ms*perTime,set_scrollTop=function(){obj.scrollTop(obj.scrollTop()+top_per_px);var stop_toTop_bool=0>=top_per_px&&obj.scrollTop()+top_per_px<=opt.toTop_px,stop_toDown_bool=top_per_px>=0&&obj.scrollTop()+top_per_px>=opt.toTop_px;if(stop_toTop_bool||stop_toDown_bool)return obj.scrollTop(opt.toTop_px),void(opt.callback&&opt.callback());var stop_toDown_bool=top_per_px>=0&&obj.scrollTop()+$(window).height()>=obj[0].scrollHeight;stop_toDown_bool||setTimeout(function(){set_scrollTop()},perTime)};set_scrollTop()},clone:function(myObj){if("object"!=typeof myObj)return myObj;if(null===myObj)return myObj;var myNewObj={};for(var i in myObj)myNewObj[i]=functions.clone(myObj[i]);return myNewObj},insert_keyframe:function(style){var _obj=document.styleSheets[0];_obj.insertRule?_obj.insertRule(style,0):_obj.appendRule(style,0)},webkitAnimationListen:function(selector,Callback_end,Callback_start,Callback_iteration){var obj=document.querySelector(selector);Callback_end&&obj.addEventListener("webkitAnimationEnd",Callback_end),Callback_start&&obj.addEventListener("webkitAnimationStart",Callback_start),Callback_iteration&&obj.addEventListener("webkitAnimationIteration",Callback_iteration)},mobile_stop_moved:function(selector,overflow_scrolling){$(selector).css("overflow","scroll"),$(document).on("touchmove",function(e){e.preventDefault()}),overflow_scrolling&&($(selector).css("-webkit-overflow-scrolling","touch"),$("body").on("touchstart",selector,function(e){var el=e.currentTarget;0===el.scrollTop?el.scrollTop=1:el.scrollHeight==el.scrollTop+el.offsetHeight&&(el.scrollTop=el.scrollTop-1)}),$("body").on("touchmove",selector,function(e){var el=e.currentTarget;0!==el.scrollTop&&e.stopPropagation()}))},li_click:function(selector){$("#link_new_window").remove(),$("body").append('<a id="link_new_window" href="'+$(selector).attr("url")+'" target="'+$(selector).attr("target")+'" style="cursor:pointer"><span></span></a>');try{var e=document.createEvent("MouseEvent");e.initEvent("click",!1,!1);var sub=document.getElementById("link_new_window");sub.dispatchEvent(e)}catch(ee){$("#link_new_window span").click()}},includeJS:function(path){var a=document.createElement("script");a.type="text/javascript",a.src=path;var head=document.getElementsByTagName("head")[0];head.appendChild(a)},includeCSS:function(path){var a=document.createElement("link");a.type="text/css",a.rel="stylesheet",a.href=path;var head=document.getElementsByTagName("head")[0];head.appendChild(a)},getQueryParas:function(){var Json_obj,str=functions.getQueryParas_str(1,"");return Json_obj=JSON.parse(str)},transParameters:function(Para){return functions.getQueryParas_str(2,Para)},getQueryParas_str:function(Kind,Para){var url=location.href,s=url.indexOf("?"),str="";try{Para="<"+Para.replace(/\|/g,"><")+">"}catch(e){console.log("e:"+e)}if(s>-1){url=url.substring(s+1);for(var key,value,e=url.indexOf("=");e>-1;)if(key=url.substring(0,e).replace("&",""),Para.indexOf("<"+key+">")>-1){if(e=url.indexOf("&"),-1==e)break;
url=url.substring(e+1),e=url.indexOf("=")}else url=url.substring(e+1),e=url.indexOf("&"),value=-1==e?url.substring(0):url.substring(0,e),url=url.substring(e+1),e=url.indexOf("="),""!==str&&(str+=1==Kind?",":"&"),str+=1==Kind?'"'+key+'":"'+value+'"':key.replace("&","")+"="+value}return 1==Kind&&(str="{"+str+"}"),str},isPc:function(){var system={win:!1,mac:!1,xll:!1},p=navigator.platform;return system.win=0===p.indexOf("Win"),system.mac=0===p.indexOf("Mac"),system.x11="X11"===p||0===p.indexOf("Linux"),system.win||system.mac||system.xll?!0:!1},StrLength:function(Str){var _c,_i=0,_n=Str.length,_l=0;for(_i;_n>_i;_i++)_c=Str.charCodeAt(_i),_l+=126>=_c?1:2;return _l}};"function"==typeof define&&define.amd?define("lib/functions",[],function(){return functions.init(),functions}):functions.init(),"function"==typeof define&&define.amd&&define("lib/LayerShow",[],function(){return LayerShow}),function(window,document,Math){"use strict";function _touchstart(e){var jroll=utils.findScroller(e.target);jroll?(JRoll.jrollActive=jroll,jroll.moving&&(e.preventDefault(),jroll.moving=!1),jroll._start(e)):JRoll.jrollActive=null}function _touchmove(e){if(JRoll.jrollActive){var activeElement=document.activeElement;JRoll.jrollActive.options.preventDefault&&e.preventDefault(),!utils.isMobile||"INPUT"!==activeElement.tagName&&"TEXTAREA"!==activeElement.tagName||activeElement.blur(),JRoll.jrollActive._move(e)}}function _touchend(){JRoll.jrollActive&&JRoll.jrollActive._end()}function _resize(){setTimeout(function(){for(var i in jrollMap)jrollMap[i].refresh().scrollTo(jrollMap[i].x,jrollMap[i].y,200)},600)}function _wheel(e){var jroll=utils.findScroller(e.target);jroll&&jroll._wheel(e)}function addEvent(type,method){document.addEventListener(type,method,!1)}var isIE678=function(){var yes=!1,browser=navigator.appName;if("Microsoft Internet Explorer"==browser){var b_version=navigator.appVersion,version=b_version.split(";"),trim_Version=version[1].replace(/[ ]/g,"");("MSIE6.0"==trim_Version||"MSIE7.0"==trim_Version||"MSIE8.0"==trim_Version)&&(yes=!0)}return yes};if(isIE678())return null;var JRoll,VERSION="2.3.2",rAF=window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(callback){setTimeout(callback,17)},sty=document.createElement("div").style,jrollMap={},ua=navigator.userAgent.toLowerCase(),prefix=function(){for(var transform,vendors=["t","webkitT","MozT","msT","OT"],i=vendors.length;i--;)if(transform=vendors[i]+"ransform",transform in sty)return vendors[i]}(),utils={TSF:prefix+"ransform",TSD:prefix+"ransitionDuration",TFO:prefix+"ransformOrigin",isAndroid:/android/.test(ua),isIOS:/iphone|ipad/.test(ua),isMobile:/mobile|phone|android|pad/.test(ua),translateZ:function(pre){var f;return f=pre?pre+"Perspective"in sty:"perspective"in sty,f?" translateZ(0px)":""}(prefix.substr(0,prefix.length-1)),computePosition:function(a,b){for(var left=0,top=0;a;)left+=a.offsetLeft,top+=a.offsetTop,a=a.offsetParent,a===b&&(a=null);return{left:left,top:top}},moveTo:function(el,x,y,duration,callback){function moving(){d-=17,0>=d?(endX=x,endY=y):(endX=parseInt(endX+stepX,10),endY=parseInt(endY+stepY,10)),el.style[utils.TSF]="translate("+endX+"px, "+endY+"px)"+utils.translateZ+" scale("+zoom+")",d>0&&(endX!==x||endY!==y)?rAF(moving):"function"==typeof callback&&callback()}var endX,endY,stepX,stepY,d,result,startX=0,startY=0,zoom=1;result=/translate\(([\-\d\.]+)px,\s+([\-\d\.]+)px\)\s+(?:translateZ\(0px\)\s+)?scale\(([\d\.]+)\)/.exec(el.style[utils.TSF]),result&&(startX=Number(result[1]),startY=Number(result[2]),zoom=Number(result[3])),d=duration||17,stepX=(x-startX)/(d/17),stepY=(y-startY)/(d/17),endX=startX,endY=startY,moving()},findScroller:function(el,force){var id;if(force||!("TEXTAREA"===el.tagName&&el.scrollHeight>el.offsetHeight))for(;el!==document;){if(id=el.getAttribute("jroll-id"))return jrollMap[id];el=el.parentNode}return null}};addEvent(utils.isMobile?"touchstart":"mousedown",_touchstart),addEvent(utils.isMobile?"touchmove":"mousemove",_touchmove),addEvent(utils.isMobile?"touchend":"mouseup",_touchend),utils.isMobile?addEvent("touchcancel",_touchend):addEvent(/firefox/.test(ua)?"DOMMouseScroll":"mousewheel",_wheel),window.addEventListener("resize",_resize),window.addEventListener("orientationchange",_resize),JRoll=function(el,options){this._init(el,options)},JRoll.version=VERSION,JRoll.utils=utils,JRoll.jrollMap=jrollMap,JRoll.prototype={_init:function(el,options){var me=this;if(me.wrapper="string"==typeof el?document.querySelector(el):el,me.scroller=options&&options.scroller?"string"==typeof options.scroller?document.querySelector(options.scroller):options.scroller:me.wrapper.children[0],me.scroller.jroll)return me.scroller.jroll.refresh(),me.scroller.jroll;me.scroller.jroll=me,me.wrapperOffset=utils.computePosition(me.wrapper,document.body),me.id=options&&options.id||me.scroller.getAttribute("jroll-id")||"jroll_"+Math.random().toString().substr(2,8),me.scroller.setAttribute("jroll-id",me.id),jrollMap[me.id]=me,me.options={scrollX:!1,scrollY:!0,scrollFree:!1,minX:null,maxX:null,minY:null,maxY:null,zoom:!1,zoomMin:1,zoomMax:4,bounce:!0,scrollBarX:!1,scrollBarY:!1,scrollBarFade:!1,preventDefault:!0,momentum:!0,autoStyle:!0};for(var i in options)"scroller"!==i&&(me.options[i]=options[i]);me.options.autoStyle&&("static"===window.getComputedStyle(me.wrapper).position&&(me.wrapper.style.position="relative",me.wrapper.style.top="0",me.wrapper.style.left="0"),me.wrapper.style.overflow="hidden",me.scroller.style.minHeight="100%"),me.x=0,me.y=0,me.s=null,me.scrollBarX=null,me.scrollBarY=null,me._s={startX:0,startY:0,lastX:0,lastY:0,endX:0,endY:0},me._z={spacing:0,scale:1,startScale:1},me._event={scrollStart:[],scroll:[],scrollEnd:[],zoomStart:[],zoom:[],zoomEnd:[],refresh:[],touchEnd:[]},me.refresh(!0)},enable:function(){var me=this;return me.scroller.setAttribute("jroll-id",me.id),me},disable:function(){var me=this;return me.scroller.removeAttribute("jroll-id"),me},destroy:function(){var me=this;delete jrollMap[me.id],delete me.scroller.jroll,me.scrollBarX&&me.wrapper.removeChild(me.scrollBarX),me.scrollBarY&&me.wrapper.removeChild(me.scrollBarY),me.disable(),me.scroller.style[utils.tSF]="",me.scroller.style[utils.tSD]="",me.prototype=null;for(var i in me)me.hasOwnProperty(i)&&delete me[i]},call:function(target,e){var me=this;return me._s.lockX=!1,me._s.lockY=!1,me.scrollTo(me.x,me.y),JRoll.jrollActive=target,e&&target._start(e),target},refresh:function(notRefreshEvent){var paddingX,paddingY,marginX,marginY,temp,size,me=this,wrapperStyle=getComputedStyle(me.wrapper),scrollerStyle=getComputedStyle(me.scroller);return me.wrapperWidth=me.wrapper.clientWidth,me.wrapperHeight=me.wrapper.clientHeight,me.scrollerWidth=Math.round(me.scroller.offsetWidth*me._z.scale),me.scrollerHeight=Math.round(me.scroller.offsetHeight*me._z.scale),paddingX=parseInt(wrapperStyle["padding-left"])+parseInt(wrapperStyle["padding-right"]),paddingY=parseInt(wrapperStyle["padding-top"])+parseInt(wrapperStyle["padding-bottom"]),marginX=parseInt(scrollerStyle["margin-left"])+parseInt(scrollerStyle["margin-right"]),marginY=parseInt(scrollerStyle["margin-top"])+parseInt(scrollerStyle["margin-bottom"]),me.minScrollX=null===me.options.minX?0:me.options.minX,me.maxScrollX=null===me.options.maxX?me.wrapperWidth-me.scrollerWidth-paddingX-marginX:me.options.maxX,me.minScrollY=null===me.options.minY?0:me.options.minY,me.maxScrollY=null===me.options.maxY?me.wrapperHeight-me.scrollerHeight-paddingY-marginY:me.options.maxY,me.minScrollX<0&&(me.minScrollX=0),me.minScrollY<0&&(me.minScrollY=0),me.maxScrollX>0&&(me.maxScrollX=0),me.maxScrollY>0&&(me.maxScrollY=0),me._s.endX=me.x,me._s.endY=me.y,me.options.scrollBarX?(me.scrollBarX||(temp=me._createScrollBar("jroll-xbar","jroll-xbtn",!1),me.scrollBarX=temp[0],me.scrollBtnX=temp[1]),me.scrollBarScaleX=me.wrapper.clientWidth/me.scrollerWidth,size=Math.round(me.scrollBarX.clientWidth*me.scrollBarScaleX),me.scrollBtnX.style.width=(size>8?size:8)+"px",me._runScrollBarX()):me.scrollBarX&&(me.wrapper.removeChild(me.scrollBarX),me.scrollBarX=null),me.options.scrollBarY?(me.scrollBarY||(temp=me._createScrollBar("jroll-ybar","jroll-ybtn",!0),me.scrollBarY=temp[0],me.scrollBtnY=temp[1]),me.scrollBarScaleY=me.wrapper.clientHeight/me.scrollerHeight,size=Math.round(me.scrollBarY.clientHeight*me.scrollBarScaleY),me.scrollBtnY.style.height=(size>8?size:8)+"px",me._runScrollBarY()):me.scrollBarY&&(me.wrapper.removeChild(me.scrollBarY),me.scrollBarY=null),notRefreshEvent||me._execEvent("refresh"),me},scale:function(multiple){var me=this,z=parseFloat(multiple);return isNaN(z)||(me.scroller.style[utils.TFO]="0 0",me._z.scale=z,me.refresh()._scrollTo(me.x,me.y),me.scrollTo(me.x,me.y,400)),me},_wheel:function(e){var me=this,y=e.wheelDelta||120*-(e.detail/3);(me.options.scrollY||me.options.scrollFree)&&me.scrollTo(me.x,me._compute(me.y+y,me.minScrollY,me.maxScrollY))},_runScrollBarX:function(){var me=this,x=Math.round(-1*me.x*me.scrollBarScaleX);me._scrollTo.call({scroller:me.scrollBtnX,_z:{scale:1}},x,0)},_runScrollBarY:function(){var me=this,y=Math.round(-1*me.y*me.scrollBarScaleY);me._scrollTo.call({scroller:me.scrollBtnY,_z:{scale:1}},0,y)},_createScrollBar:function(a,b,isY){var bar,btn,me=this;return bar=document.createElement("div"),btn=document.createElement("div"),bar.className=a,btn.className=b,(this.options.scrollBarX===!0||this.options.scrollBarY===!0)&&(isY?(bar.style.cssText="position:absolute;top:2px;right:2px;bottom:2px;width:6px;overflow:hidden;border-radius:2px;-webkit-transform: scaleX(.5);transform: scaleX(.5);",btn.style.cssText="background:rgba(0,0,0,.4);position:absolute;top:0;left:0;right:0;border-radius:2px;"):(bar.style.cssText="position:absolute;left:2px;bottom:2px;right:2px;height:6px;overflow:hidden;border-radius:2px;-webkit-transform: scaleY(.5);transform: scaleY(.5);",btn.style.cssText="background:rgba(0,0,0,.4);height:100%;position:absolute;left:0;top:0;bottom:0;border-radius:2px;")),me.options.scrollBarFade&&(bar.style.opacity=0),bar.appendChild(btn),me.wrapper.appendChild(bar),[bar,btn]},_fade:function(bar,time){var me=this;me.fading&&time>0&&(time-=25,time%100===0&&(bar.style.opacity=time/1e3),rAF(me._fade.bind(me,bar,time)))},on:function(event,callback){var me=this;switch(event){case"scrollStart":me._event.scrollStart.push(callback);break;case"scroll":me._event.scroll.push(callback);break;case"scrollEnd":me._event.scrollEnd.push(callback);break;case"zoomStart":me._event.zoomStart.push(callback);break;case"zoom":me._event.zoom.push(callback);break;case"zoomEnd":me._event.zoomEnd.push(callback);break;case"refresh":me._event.refresh.push(callback);break;case"touchEnd":me._event.touchEnd.push(callback)}},_execEvent:function(event,e){for(var me=this,i=me._event[event].length-1;i>=0;i--)me._event[event][i].call(me,e)},_compute:function(val,min,max){var me=this;return val>min?me.options.bounce&&val>min+10?Math.round(min+(val-min)/4):min:max>val?me.options.bounce&&max-10>val?Math.round(max+(val-max)/4):max:val},_scrollTo:function(x,y){this.scroller.style[utils.TSF]="translate("+x+"px, "+y+"px)"+utils.translateZ+" scale("+this._z.scale+")"},scrollTo:function(x,y,timing,allow,callback,system,t){var me=this;return allow?(me.x=x,me.y=y):(x>=me.minScrollX?(me.x=me.minScrollX,t&&(me._s.startX=t[0].pageX,me._s.endX=me.minScrollX)):x<=me.maxScrollX?(me.x=me.maxScrollX,t&&(me._s.startX=t[0].pageX,me._s.endX=me.maxScrollX)):me.x=x,y>=me.minScrollY?(me.y=me.minScrollY,t&&(me._s.startY=t[0].pageY,me._s.endY=me.minScrollY)):y<=me.maxScrollY?(me.y=me.maxScrollY,t&&(me._s.startY=t[0].pageY,me._s.endY=me.maxScrollY)):me.y=y),system||(me._s.endX=me.x,me._s.endY=me.y),timing?utils.moveTo(me.scroller,me.x,me.y,timing,callback):(me._scrollTo(me.x,me.y),"function"==typeof callback&&callback()),me.scrollBtnX&&me._runScrollBarX(),me.scrollBtnY&&me._runScrollBarY(),me},_endAction:function(){var me=this;me._s.endX=me.x,me._s.endY=me.y,me.moving=!1,me.options.scrollBarFade&&!me.fading&&(me.fading=!0,me.scrollBarX&&me._fade(me.scrollBarX,2e3),me.scrollBarY&&me._fade(me.scrollBarY,2e3)),me._execEvent("scrollEnd")},_stepBounce:function(){function over(){me.scrollTo(me.x,me.y,100)}var me=this;me.bouncing=!1,"scrollY"===me.s?1===me.directionY?(me.scrollTo(me.x,me.minScrollY+20,100,!0,over),me.y=me.minScrollY):(me.scrollTo(me.x,me.maxScrollY-20,100,!0,over),me.y=me.maxScrollY):"scrollX"===me.s&&(1===me.directionX?(me.scrollTo(me.minScrollX+20,me.y,100,!0,over),me.x=me.minScrollX):(me.scrollTo(me.maxScrollX-20,me.y,100,!0,over),me.x=me.maxScrollX))},_x:function(p){var me=this,n=me.directionX*p;isNaN(n)||(me.x=me.x+n,(me.x>=me.minScrollX||me.x<=me.maxScrollX)&&(me.moving=!1,me.options.bounce&&(me.bouncing=!0)))},_y:function(p){var me=this,n=me.directionY*p;isNaN(n)||(me.y=me.y+n,(me.y>=me.minScrollY||me.y<=me.maxScrollY)&&(me.moving=!1,me.options.bounce&&(me.bouncing=!0)))},_xy:function(p){var me=this,x=Math.round(me.cosX*p),y=Math.round(me.cosY*p);isNaN(x)||isNaN(y)||(me.x=me.x+x,me.y=me.y+y,(me.x>=me.minScrollX||me.x<=me.maxScrollX)&&(me.y>=me.minScrollY||me.y<=me.maxScrollY)&&(me.moving=!1))},_step:function(time){var me=this,now=Date.now(),t=now-time,s=0;if(me.bouncing&&me._stepBounce(),!me.moving)return void me._endAction();if(t>10){if(me.speed=me.speed-t*(me.speed>1.2?.001:me.speed>.6?8e-4:6e-4),s=Math.round(me.speed*t),me.speed<=0||0>=s)return void me._endAction();time=now,me._do(s),me.scrollTo(me.x,me.y,0,!1,null,!0),me._execEvent("scroll")}rAF(me._step.bind(me,time))},_doScroll:function(d,e){var pageY,me=this;me.distance=d,me.options.bounce&&(me.x=me._compute(me.x,me.minScrollX,me.maxScrollX),me.y=me._compute(me.y,me.minScrollY,me.maxScrollY)),me.scrollTo(me.x,me.y,0,me.options.bounce,null,!0,e.touches||[e]),me._execEvent("scroll",e),e&&e.touches&&(pageY=e.touches[0].pageY,(10>=pageY||pageY>=window.innerHeight-10)&&me._end())},_start:function(e){var me=this,t=e.touches||[e];if((me.options.scrollX||me.options.scrollY||me.options.scrollFree)&&(1===t.length||!me.options.zoom))return me.s="preScroll",me.distance=0,me.lastMoveTime=me.startTime=Date.now(),me._s.lastX=me.startPositionX=me._s.startX=t[0].pageX,me._s.lastY=me.startPositionY=me._s.startY=t[0].pageY,void me._execEvent("scrollStart",e);if(me.s=null,me.options.zoom&&t.length>1){me.s="preZoom",me.scroller.style[utils.TFO]="0 0";var c1=Math.abs(t[0].pageX-t[1].pageX),c2=Math.abs(t[0].pageY-t[1].pageY);return me._z.spacing=Math.sqrt(c1*c1+c2*c2),me._z.startScale=me._z.scale,me.originX=Math.abs(t[0].pageX+t[1].pageX)/2-me.wrapperOffset.left-me.x,me.originY=Math.abs(t[0].pageY+t[1].pageY)/2-me.wrapperOffset.top-me.y,void me._execEvent("zoomStart",e)}},_move:function(e){var now,x,y,dx,dy,px,py,sqrtXY,me=this,t=e.touches||[e],directionX=1,directionY=1;if(x=t[0].pageX,y=t[0].pageY,dx=x-me._s.lastX,dy=y-me._s.lastY,me._s.lastX=x,me._s.lastY=y,directionX=dx>=0?1:-1,directionY=dy>=0?1:-1,now=Date.now(),(now-me.lastMoveTime>200||me.directionX!==directionX||me.directionY!==directionY)&&(me.startTime=now,me.startPositionX=x,me.startPositionY=y,me.directionX=directionX,me.directionY=directionY),me.lastMoveTime=now,px=x-me.startPositionX,py=y-me.startPositionY,"preScroll"===me.s){if(me.options.scrollBarFade&&(me.fading=!1,me.scrollBarX&&(me.scrollBarX.style.opacity=1),me.scrollBarY&&(me.scrollBarY.style.opacity=1)),!me.options.scrollFree&&me.options.scrollY&&(!me.options.scrollX||Math.abs(y-me._s.startY)>=Math.abs(x-me._s.startX)))return me._do=me._y,void(me.s="scrollY");if(!me.options.scrollFree&&me.options.scrollX&&(!me.options.scrollY||Math.abs(y-me._s.startY)<Math.abs(x-me._s.startX)))return me._do=me._x,void(me.s="scrollX");if(me.options.scrollFree)return me._do=me._xy,void(me.s="scrollFree")}if("scrollY"===me.s)return me.y=y-me._s.startY+me._s.endY,void me._doScroll(py,e);if("scrollX"===me.s)return me.x=x-me._s.startX+me._s.endX,void me._doScroll(px,e);if("scrollFree"===me.s)return me.x=x-me._s.startX+me._s.endX,me.y=y-me._s.startY+me._s.endY,sqrtXY=Math.sqrt(px*px+py*py),me.cosX=px/sqrtXY,me.cosY=py/sqrtXY,void me._doScroll(Math.sqrt(px*px+py*py),e);if("preZoom"===me.s){var lastScale,c1=Math.abs(t[0].pageX-t[1].pageX),c2=Math.abs(t[0].pageY-t[1].pageY),spacing=Math.sqrt(c1*c1+c2*c2),scale=spacing/me._z.spacing*me._z.startScale;return scale<me.options.zoomMin?scale=me.options.zoomMin:scale>me.options.zoomMax&&(scale=me.options.zoomMax),lastScale=scale/me._z.startScale,me.x=Math.round(me.originX-me.originX*lastScale+me._s.endX),me.y=Math.round(me.originY-me.originY*lastScale+me._s.endY),me._z.scale=scale,me._scrollTo(me.x,me.y),void me._execEvent("zoom",e)}},_end:function(){var ex1,ex2,me=this,now=Date.now(),s1="scrollY"===me.s,s2="scrollX"===me.s,s3="scrollFree"===me.s;return JRoll.jrollActive=null,me._execEvent("touchEnd"),s1||s2||s3?(me.duration=now-me.startTime,ex1=me.y>me.minScrollY||me.y<me.maxScrollY,ex2=me.x>me.minScrollX||me.x<me.maxScrollX,void(s1&&ex1||s2&&ex2||s3&&(ex1||ex2)?me.scrollTo(me.x,me.y,300)._endAction():me.options.momentum&&me.duration<200&&me.distance?(me.speed=Math.abs(me.distance/me.duration),me.speed=me.speed>2?2:me.speed,me.moving=!0,rAF(me._step.bind(me,now))):me._endAction())):"preZoom"===me.s?(me._z.scale>me.options.zoomMax?me._z.scale=me.options.zoomMax:me._z.scale<me.options.zoomMin&&(me._z.scale=me.options.zoomMin),me.refresh(),me.scrollTo(me.x,me.y,400),void me._execEvent("zoomEnd")):void("preScroll"!==me.s&&"preZoom"!==me.s||!me.options.scrollBarFade||me.fading||(me.fading=!0,me.scrollBarX&&me._fade(me.scrollBarX,2e3),me.scrollBarY&&me._fade(me.scrollBarY,2e3)))}},"undefined"!=typeof module&&module.exports&&(module.exports=JRoll),"function"==typeof define&&define("lib/jroll",[],function(){return JRoll}),window.JRoll=JRoll}(window,document,Math),!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("lib/socket.io.min",[],e):"object"==typeof exports?exports.io=e():t.io=e()}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";function n(t,e){"object"===("undefined"==typeof t?"undefined":i(t))&&(e=t,t=void 0),e=e||{};var r,n=s(t),a=n.source,p=n.id,f=n.path,l=h[p]&&f in h[p].nsps,d=e.forceNew||e["force new connection"]||!1===e.multiplex||l;return d?(u("ignoring socket cache for %s",a),r=c(a,e)):(h[p]||(u("new io instance for %s",a),h[p]=c(a,e)),r=h[p]),n.query&&!e.query?e.query=n.query:e&&"object"===i(e.query)&&(e.query=o(e.query)),r.socket(n.path,e)}function o(t){var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e.join("&")}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=r(1),a=r(7),c=r(17),u=r(3)("socket.io-client");t.exports=e=n;var h=e.managers={};e.protocol=a.protocol,e.connect=n,e.Manager=r(17),e.Socket=r(44)},function(t,e,r){(function(e){"use strict";function n(t,r){var n=t;r=r||e.location,null==t&&(t=r.protocol+"//"+r.host),"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?r.protocol+t:r.host+t),/^(https?|wss?):\/\//.test(t)||(i("protocol-less url %s",t),t="undefined"!=typeof r?r.protocol+"//"+t:"https://"+t),i("parse %s",t),n=o(t)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";var s=-1!==n.host.indexOf(":"),a=s?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+a+":"+n.port,n.href=n.protocol+"://"+a+(r&&r.port===n.port?"":":"+n.port),n}var o=r(2),i=r(3)("socket.io-client:url");t.exports=n}).call(e,function(){return this}())},function(t){var r=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,n=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(t){var e=t,o=t.indexOf("["),i=t.indexOf("]");-1!=o&&-1!=i&&(t=t.substring(0,o)+t.substring(o,i).replace(/:/g,";")+t.substring(i,t.length));for(var s=r.exec(t||""),a={},c=14;c--;)a[n[c]]=s[c]||"";return-1!=o&&-1!=i&&(a.source=e,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a}},function(t,e,r){(function(n){function o(){return"undefined"!=typeof document&&"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function i(){var t=arguments,r=this.useColors;if(t[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+t[0]+(r?"%c ":" ")+"+"+e.humanize(this.diff),!r)return t;var n="color: "+this.color;t=[t[0],n,"color: inherit"].concat(Array.prototype.slice.call(t,1));var o=0,i=0;return t[0].replace(/%[a-z%]/g,function(t){"%%"!==t&&(o++,"%c"===t&&(i=o))}),t.splice(i,0,n),t}function s(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function a(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(t){}}function c(){try{return e.storage.debug}catch(t){}return"undefined"!=typeof n&&"env"in n?n.env.DEBUG:void 0}function u(){try{return window.localStorage}catch(t){}}e=t.exports=r(5),e.log=s,e.formatArgs=i,e.save=a,e.load=c,e.useColors=o,e.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:u(),e.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},e.enable(c())}).call(e,r(4))},function(t){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function o(t){if(h===setTimeout)return setTimeout(t,0);if((h===r||!h)&&setTimeout)return h=setTimeout,setTimeout(t,0);try{return h(t,0)}catch(e){try{return h.call(null,t,0)}catch(e){return h.call(this,t,0)}}}function i(t){if(p===clearTimeout)return clearTimeout(t);if((p===n||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(t);try{return p(t)}catch(e){try{return p.call(null,t)}catch(e){return p.call(this,t)}}}function s(){y&&l&&(y=!1,l.length?d=l.concat(d):g=-1,d.length&&a())}function a(){if(!y){var t=o(s);y=!0;for(var e=d.length;e;){for(l=d,d=[];++g<e;)l&&l[g].run();g=-1,e=d.length}l=null,y=!1,i(t)}}function c(t,e){this.fun=t,this.array=e}function u(){}var h,p,f=t.exports={};!function(){try{h="function"==typeof setTimeout?setTimeout:r}catch(t){h=r}try{p="function"==typeof clearTimeout?clearTimeout:n}catch(t){p=n}}();var l,d=[],y=!1,g=-1;f.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];d.push(new c(t,e)),1!==d.length||y||o(a)},c.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=u,f.addListener=u,f.once=u,f.off=u,f.removeListener=u,f.removeAllListeners=u,f.emit=u,f.binding=function(){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(t,e,r){function n(){return e.colors[h++%e.colors.length]}function o(t){function r(){}function o(){var t=o,r=+new Date,i=r-(u||r);t.diff=i,t.prev=u,t.curr=r,u=r,null==t.useColors&&(t.useColors=e.useColors()),null==t.color&&t.useColors&&(t.color=n());for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=e.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var c=0;s[0]=s[0].replace(/%([a-z%])/g,function(r,n){if("%%"===r)return r;c++;var o=e.formatters[n];if("function"==typeof o){var i=s[c];r=o.call(t,i),s.splice(c,1),c--}return r}),s=e.formatArgs.apply(t,s);var h=o.log||e.log||console.log.bind(console);h.apply(t,s)}r.enabled=!1,o.enabled=!0;var i=e.enabled(t)?o:r;return i.namespace=t,i}function i(t){e.save(t);for(var r=(t||"").split(/[\s,]+/),n=r.length,o=0;n>o;o++)r[o]&&(t=r[o].replace(/[\\^$+?.()|[\]{}]/g,"\\$&").replace(/\*/g,".*?"),"-"===t[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))}function s(){e.enable("")}function a(t){var r,n;for(r=0,n=e.skips.length;n>r;r++)if(e.skips[r].test(t))return!1;for(r=0,n=e.names.length;n>r;r++)if(e.names[r].test(t))return!0;return!1}function c(t){return t instanceof Error?t.stack||t.message:t}e=t.exports=o.debug=o,e.coerce=c,e.disable=s,e.enable=i,e.enabled=a,e.humanize=r(6),e.names=[],e.skips=[],e.formatters={};var u,h=0},function(t){function r(t){if(t=String(t),!(t.length>1e4)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*h;case"days":case"day":case"d":return r*u;case"hours":case"hour":case"hrs":case"hr":case"h":return r*c;case"minutes":case"minute":case"mins":case"min":case"m":return r*a;case"seconds":case"second":case"secs":case"sec":case"s":return r*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function n(t){return t>=u?Math.round(t/u)+"d":t>=c?Math.round(t/c)+"h":t>=a?Math.round(t/a)+"m":t>=s?Math.round(t/s)+"s":t+"ms"}function o(t){return i(t,u,"day")||i(t,c,"hour")||i(t,a,"minute")||i(t,s,"second")||t+" ms"}function i(t,e,r){return e>t?void 0:1.5*e>t?Math.floor(t/e)+" "+r:Math.ceil(t/e)+" "+r+"s"}var s=1e3,a=60*s,c=60*a,u=24*c,h=365.25*u;t.exports=function(t,e){e=e||{};var i=typeof t;if("string"===i&&t.length>0)return r(t);if("number"===i&&isNaN(t)===!1)return e.long?o(t):n(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(t,e,r){function n(){}function o(t){var r="",n=!1;return r+=t.type,e.BINARY_EVENT!=t.type&&e.BINARY_ACK!=t.type||(r+=t.attachments,r+="-"),t.nsp&&"/"!=t.nsp&&(n=!0,r+=t.nsp),null!=t.id&&(n&&(r+=",",n=!1),r+=t.id),null!=t.data&&(n&&(r+=","),r+=f.stringify(t.data)),p("encoded %j as %s",t,r),r}function i(t,e){function r(t){var r=d.deconstructPacket(t),n=o(r.packet),i=r.buffers;i.unshift(n),e(i)}d.removeBlobs(t,r)}function s(){this.reconstructor=null}function a(t){var r={},n=0;if(r.type=Number(t.charAt(0)),null==e.types[r.type])return h();if(e.BINARY_EVENT==r.type||e.BINARY_ACK==r.type){for(var o="";"-"!=t.charAt(++n)&&(o+=t.charAt(n),n!=t.length););if(o!=Number(o)||"-"!=t.charAt(n))throw new Error("Illegal attachments");r.attachments=Number(o)}if("/"==t.charAt(n+1))for(r.nsp="";++n;){var i=t.charAt(n);if(","==i)break;if(r.nsp+=i,n==t.length)break}else r.nsp="/";var s=t.charAt(n+1);if(""!==s&&Number(s)==s){for(r.id="";++n;){var i=t.charAt(n);if(null==i||Number(i)!=i){--n;break}if(r.id+=t.charAt(n),n==t.length)break}r.id=Number(r.id)}return t.charAt(++n)&&(r=c(r,t.substr(n))),p("decoded %s as %j",t,r),r}function c(t,e){try{t.data=f.parse(e)}catch(t){return h()}return t}function u(t){this.reconPack=t,this.buffers=[]}function h(){return{type:e.ERROR,data:"parser error"}}var p=r(8)("socket.io-parser"),f=r(11),l=r(13),d=r(14),y=r(16);e.protocol=4,e.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],e.CONNECT=0,e.DISCONNECT=1,e.EVENT=2,e.ACK=3,e.ERROR=4,e.BINARY_EVENT=5,e.BINARY_ACK=6,e.Encoder=n,e.Decoder=s,n.prototype.encode=function(t,r){if(p("encoding packet %j",t),e.BINARY_EVENT==t.type||e.BINARY_ACK==t.type)i(t,r);else{var n=o(t);r([n])}},l(s.prototype),s.prototype.add=function(t){var r;if("string"==typeof t)r=a(t),e.BINARY_EVENT==r.type||e.BINARY_ACK==r.type?(this.reconstructor=new u(r),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",r)):this.emit("decoded",r);else{if(!y(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");r=this.reconstructor.takeBinaryData(t),r&&(this.reconstructor=null,this.emit("decoded",r))}},s.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},u.prototype.takeBinaryData=function(t){if(this.buffers.push(t),this.buffers.length==this.reconPack.attachments){var e=d.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null},u.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(t,e,r){function n(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function o(){var t=arguments,r=this.useColors;if(t[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+t[0]+(r?"%c ":" ")+"+"+e.humanize(this.diff),!r)return t;var n="color: "+this.color;t=[t[0],n,"color: inherit"].concat(Array.prototype.slice.call(t,1));var o=0,i=0;return t[0].replace(/%[a-z%]/g,function(t){"%%"!==t&&(o++,"%c"===t&&(i=o))}),t.splice(i,0,n),t}function i(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(t){}}function a(){var t;try{t=e.storage.debug}catch(t){}return t}function c(){try{return window.localStorage}catch(t){}}e=t.exports=r(9),e.log=i,e.formatArgs=o,e.save=s,e.load=a,e.useColors=n,e.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:c(),e.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],e.formatters.j=function(t){return JSON.stringify(t)},e.enable(a())},function(t,e,r){function n(){return e.colors[h++%e.colors.length]}function o(t){function r(){}function o(){var t=o,r=+new Date,i=r-(u||r);t.diff=i,t.prev=u,t.curr=r,u=r,null==t.useColors&&(t.useColors=e.useColors()),null==t.color&&t.useColors&&(t.color=n());var s=Array.prototype.slice.call(arguments);s[0]=e.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var a=0;s[0]=s[0].replace(/%([a-z%])/g,function(r,n){if("%%"===r)return r;a++;var o=e.formatters[n];if("function"==typeof o){var i=s[a];r=o.call(t,i),s.splice(a,1),a--}return r}),"function"==typeof e.formatArgs&&(s=e.formatArgs.apply(t,s));var c=o.log||e.log||console.log.bind(console);c.apply(t,s)}r.enabled=!1,o.enabled=!0;var i=e.enabled(t)?o:r;return i.namespace=t,i}function i(t){e.save(t);for(var r=(t||"").split(/[\s,]+/),n=r.length,o=0;n>o;o++)r[o]&&(t=r[o].replace(/\*/g,".*?"),"-"===t[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))}function s(){e.enable("")}function a(t){var r,n;for(r=0,n=e.skips.length;n>r;r++)if(e.skips[r].test(t))return!1;for(r=0,n=e.names.length;n>r;r++)if(e.names[r].test(t))return!0;return!1}function c(t){return t instanceof Error?t.stack||t.message:t}e=t.exports=o,e.coerce=c,e.disable=s,e.enable=i,e.enabled=a,e.humanize=r(10),e.names=[],e.skips=[],e.formatters={};var u,h=0},function(t){function r(t){if(t=""+t,!(t.length>1e4)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*h;case"days":case"day":case"d":return r*u;case"hours":case"hour":case"hrs":case"hr":case"h":return r*c;case"minutes":case"minute":case"mins":case"min":case"m":return r*a;case"seconds":case"second":case"secs":case"sec":case"s":return r*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r}}}}function n(t){return t>=u?Math.round(t/u)+"d":t>=c?Math.round(t/c)+"h":t>=a?Math.round(t/a)+"m":t>=s?Math.round(t/s)+"s":t+"ms"
}function o(t){return i(t,u,"day")||i(t,c,"hour")||i(t,a,"minute")||i(t,s,"second")||t+" ms"}function i(t,e,r){return e>t?void 0:1.5*e>t?Math.floor(t/e)+" "+r:Math.ceil(t/e)+" "+r+"s"}var s=1e3,a=60*s,c=60*a,u=24*c,h=365.25*u;t.exports=function(t,e){return e=e||{},"string"==typeof t?r(t):e.long?o(t):n(t)}},function(t,e,r){(function(t,r){var n=!1;(function(){function o(t,e){function r(t){if(r[t]!==g)return r[t];var o;if("bug-string-char-index"==t)o="a"!="a"[0];else if("json"==t)o=r("json-stringify")&&r("json-parse");else{var s,a='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==t){var c=e.stringify,h="function"==typeof c&&b;if(h){(s=function(){return 1}).toJSON=s;try{h="0"===c(0)&&"0"===c(new n)&&'""'==c(new i)&&c(v)===g&&c(g)===g&&c()===g&&"1"===c(s)&&"[1]"==c([s])&&"[null]"==c([g])&&"null"==c(null)&&"[null,null,null]"==c([g,v,null])&&c({a:[s,!0,!1,null,"\x00\b\n\f\r	"]})==a&&"1"===c(null,s)&&"[\n 1,\n 2\n]"==c([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==c(new u(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==c(new u(864e13))&&'"-000001-01-01T00:00:00.000Z"'==c(new u(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==c(new u(-1))}catch(t){h=!1}}o=h}if("json-parse"==t){var p=e.parse;if("function"==typeof p)try{if(0===p("0")&&!p(!1)){s=p(a);var f=5==s.a.length&&1===s.a[0];if(f){try{f=!p('"	"')}catch(t){}if(f)try{f=1!==p("01")}catch(t){}if(f)try{f=1!==p("1.")}catch(t){}}}}catch(t){f=!1}o=f}}return r[t]=!!o}t||(t=c.Object()),e||(e=c.Object());var n=t.Number||c.Number,i=t.String||c.String,a=t.Object||c.Object,u=t.Date||c.Date,h=t.SyntaxError||c.SyntaxError,p=t.TypeError||c.TypeError,f=t.Math||c.Math,l=t.JSON||c.JSON;"object"==typeof l&&l&&(e.stringify=l.stringify,e.parse=l.parse);var d,y,g,m=a.prototype,v=m.toString,b=new u(-0xc782b5b800cec);try{b=-109252==b.getUTCFullYear()&&0===b.getUTCMonth()&&1===b.getUTCDate()&&10==b.getUTCHours()&&37==b.getUTCMinutes()&&6==b.getUTCSeconds()&&708==b.getUTCMilliseconds()}catch(t){}if(!r("json")){var w="[object Function]",k="[object Date]",x="[object Number]",A="[object String]",C="[object Array]",B="[object Boolean]",S=r("bug-string-char-index");if(!b)var T=f.floor,E=[0,31,59,90,120,151,181,212,243,273,304,334],_=function(t,e){return E[e]+365*(t-1970)+T((t-1969+(e=+(e>1)))/4)-T((t-1901+e)/100)+T((t-1601+e)/400)};if((d=m.hasOwnProperty)||(d=function(t){var e,r={};return(r.__proto__=null,r.__proto__={toString:1},r).toString!=v?d=function(t){var e=this.__proto__,r=t in(this.__proto__=null,this);return this.__proto__=e,r}:(e=r.constructor,d=function(t){var r=(this.constructor||e).prototype;return t in this&&!(t in r&&this[t]===r[t])}),r=null,d.call(this,t)}),y=function(t,e){var r,n,o,i=0;(r=function(){this.valueOf=0}).prototype.valueOf=0,n=new r;for(o in n)d.call(n,o)&&i++;return r=n=null,i?y=2==i?function(t,e){var r,n={},o=v.call(t)==w;for(r in t)o&&"prototype"==r||d.call(n,r)||!(n[r]=1)||!d.call(t,r)||e(r)}:function(t,e){var r,n,o=v.call(t)==w;for(r in t)o&&"prototype"==r||!d.call(t,r)||(n="constructor"===r)||e(r);(n||d.call(t,r="constructor"))&&e(r)}:(n=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],y=function(t,e){var r,o,i=v.call(t)==w,a=!i&&"function"!=typeof t.constructor&&s[typeof t.hasOwnProperty]&&t.hasOwnProperty||d;for(r in t)i&&"prototype"==r||!a.call(t,r)||e(r);for(o=n.length;r=n[--o];a.call(t,r)&&e(r));}),y(t,e)},!r("json-stringify")){var N={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},j="000000",O=function(t,e){return(j+(e||0)).slice(-t)},P="\\u00",R=function(t){for(var e='"',r=0,n=t.length,o=!S||n>10,i=o&&(S?t.split(""):t);n>r;r++){var s=t.charCodeAt(r);switch(s){case 8:case 9:case 10:case 12:case 13:case 34:case 92:e+=N[s];break;default:if(32>s){e+=P+O(2,s.toString(16));break}e+=o?i[r]:t.charAt(r)}}return e+'"'},D=function(t,e,r,n,o,i,s){var a,c,u,h,f,l,m,b,w,S,E,N,j,P,q,U;try{a=e[t]}catch(t){}if("object"==typeof a&&a)if(c=v.call(a),c!=k||d.call(a,"toJSON"))"function"==typeof a.toJSON&&(c!=x&&c!=A&&c!=C||d.call(a,"toJSON"))&&(a=a.toJSON(t));else if(a>-1/0&&1/0>a){if(_){for(f=T(a/864e5),u=T(f/365.2425)+1970-1;_(u+1,0)<=f;u++);for(h=T((f-_(u,0))/30.42);_(u,h+1)<=f;h++);f=1+f-_(u,h),l=(a%864e5+864e5)%864e5,m=T(l/36e5)%24,b=T(l/6e4)%60,w=T(l/1e3)%60,S=l%1e3}else u=a.getUTCFullYear(),h=a.getUTCMonth(),f=a.getUTCDate(),m=a.getUTCHours(),b=a.getUTCMinutes(),w=a.getUTCSeconds(),S=a.getUTCMilliseconds();a=(0>=u||u>=1e4?(0>u?"-":"+")+O(6,0>u?-u:u):O(4,u))+"-"+O(2,h+1)+"-"+O(2,f)+"T"+O(2,m)+":"+O(2,b)+":"+O(2,w)+"."+O(3,S)+"Z"}else a=null;if(r&&(a=r.call(e,t,a)),null===a)return"null";if(c=v.call(a),c==B)return""+a;if(c==x)return a>-1/0&&1/0>a?""+a:"null";if(c==A)return R(""+a);if("object"==typeof a){for(P=s.length;P--;)if(s[P]===a)throw p();if(s.push(a),E=[],q=i,i+=o,c==C){for(j=0,P=a.length;P>j;j++)N=D(j,a,r,n,o,i,s),E.push(N===g?"null":N);U=E.length?o?"[\n"+i+E.join(",\n"+i)+"\n"+q+"]":"["+E.join(",")+"]":"[]"}else y(n||a,function(t){var e=D(t,a,r,n,o,i,s);e!==g&&E.push(R(t)+":"+(o?" ":"")+e)}),U=E.length?o?"{\n"+i+E.join(",\n"+i)+"\n"+q+"}":"{"+E.join(",")+"}":"{}";return s.pop(),U}};e.stringify=function(t,e,r){var n,o,i,a;if(s[typeof e]&&e)if((a=v.call(e))==w)o=e;else if(a==C){i={};for(var c,u=0,h=e.length;h>u;c=e[u++],a=v.call(c),(a==A||a==x)&&(i[c]=1));}if(r)if((a=v.call(r))==x){if((r-=r%1)>0)for(n="",r>10&&(r=10);n.length<r;n+=" ");}else a==A&&(n=r.length<=10?r:r.slice(0,10));return D("",(c={},c[""]=t,c),o,i,n,"",[])}}if(!r("json-parse")){var q,U,M=i.fromCharCode,L={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},I=function(){throw q=U=null,h()},H=function(){for(var t,e,r,n,o,i=U,s=i.length;s>q;)switch(o=i.charCodeAt(q)){case 9:case 10:case 13:case 32:q++;break;case 123:case 125:case 91:case 93:case 58:case 44:return t=S?i.charAt(q):i[q],q++,t;case 34:for(t="@",q++;s>q;)if(o=i.charCodeAt(q),32>o)I();else if(92==o)switch(o=i.charCodeAt(++q)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:t+=L[o],q++;break;case 117:for(e=++q,r=q+4;r>q;q++)o=i.charCodeAt(q),o>=48&&57>=o||o>=97&&102>=o||o>=65&&70>=o||I();t+=M("0x"+i.slice(e,q));break;default:I()}else{if(34==o)break;for(o=i.charCodeAt(q),e=q;o>=32&&92!=o&&34!=o;)o=i.charCodeAt(++q);t+=i.slice(e,q)}if(34==i.charCodeAt(q))return q++,t;I();default:if(e=q,45==o&&(n=!0,o=i.charCodeAt(++q)),o>=48&&57>=o){for(48==o&&(o=i.charCodeAt(q+1),o>=48&&57>=o)&&I(),n=!1;s>q&&(o=i.charCodeAt(q),o>=48&&57>=o);q++);if(46==i.charCodeAt(q)){for(r=++q;s>r&&(o=i.charCodeAt(r),o>=48&&57>=o);r++);r==q&&I(),q=r}if(o=i.charCodeAt(q),101==o||69==o){for(o=i.charCodeAt(++q),43!=o&&45!=o||q++,r=q;s>r&&(o=i.charCodeAt(r),o>=48&&57>=o);r++);r==q&&I(),q=r}return+i.slice(e,q)}if(n&&I(),"true"==i.slice(q,q+4))return q+=4,!0;if("false"==i.slice(q,q+5))return q+=5,!1;if("null"==i.slice(q,q+4))return q+=4,null;I()}return"$"},z=function(t){var e,r;if("$"==t&&I(),"string"==typeof t){if("@"==(S?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(e=[];t=H(),"]"!=t;r||(r=!0))r&&(","==t?(t=H(),"]"==t&&I()):I()),","==t&&I(),e.push(z(t));return e}if("{"==t){for(e={};t=H(),"}"!=t;r||(r=!0))r&&(","==t?(t=H(),"}"==t&&I()):I()),","!=t&&"string"==typeof t&&"@"==(S?t.charAt(0):t[0])&&":"==H()||I(),e[t.slice(1)]=z(H());return e}I()}return t},J=function(t,e,r){var n=X(t,e,r);n===g?delete t[e]:t[e]=n},X=function(t,e,r){var n,o=t[e];if("object"==typeof o&&o)if(v.call(o)==C)for(n=o.length;n--;)J(o,n,r);else y(o,function(t){J(o,t,r)});return r.call(t,e,o)};e.parse=function(t,e){var r,n;return q=0,U=""+t,r=z(H()),"$"!=H()&&I(),q=U=null,e&&v.call(e)==w?X((n={},n[""]=r,n),"",e):r}}}return e.runInContext=o,e}var i="function"==typeof n&&n.amd,s={"function":!0,object:!0},a=s[typeof e]&&e&&!e.nodeType&&e,c=s[typeof window]&&window||this,u=a&&s[typeof t]&&t&&!t.nodeType&&"object"==typeof r&&r;if(!u||u.global!==u&&u.window!==u&&u.self!==u||(c=u),a&&!i)o(c,a);else{var h=c.JSON,p=c.JSON3,f=!1,l=o(c,c.JSON3={noConflict:function(){return f||(f=!0,c.JSON=h,c.JSON3=p,h=p=null),l}});c.JSON={parse:l.parse,stringify:l.stringify}}i&&n(function(){return l})}).call(this)}).call(e,r(12)(t),function(){return this}())},function(t){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t){function r(t){return t?n(t):void 0}function n(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}t.exports=r,r.prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},r.prototype.once=function(t,e){function r(){n.off(t,r),e.apply(this,arguments)}var n=this;return this._callbacks=this._callbacks||{},r.fn=e,this.on(t,r),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks[t];if(!r)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(var n,o=0;o<r.length;o++)if(n=r[o],n===e||n.fn===e){r.splice(o,1);break}return this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),r=this._callbacks[t];if(r){r=r.slice(0);for(var n=0,o=r.length;o>n;++n)r[n].apply(this,e)}return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e,r){(function(t){var n=r(15),o=r(16);e.deconstructPacket=function(t){function e(t){if(!t)return t;if(o(t)){var i={_placeholder:!0,num:r.length};return r.push(t),i}if(n(t)){for(var s=new Array(t.length),a=0;a<t.length;a++)s[a]=e(t[a]);return s}if("object"==typeof t&&!(t instanceof Date)){var s={};for(var c in t)s[c]=e(t[c]);return s}return t}var r=[],i=t.data,s=t;return s.data=e(i),s.attachments=r.length,{packet:s,buffers:r}},e.reconstructPacket=function(t,e){function r(t){if(t&&t._placeholder){var o=e[t.num];return o}if(n(t)){for(var i=0;i<t.length;i++)t[i]=r(t[i]);return t}if(t&&"object"==typeof t){for(var s in t)t[s]=r(t[s]);return t}return t}return t.data=r(t.data),t.attachments=void 0,t},e.removeBlobs=function(e,r){function i(e,c,u){if(!e)return e;if(t.Blob&&e instanceof Blob||t.File&&e instanceof File){s++;var h=new FileReader;h.onload=function(){u?u[c]=this.result:a=this.result,--s||r(a)},h.readAsArrayBuffer(e)}else if(n(e))for(var p=0;p<e.length;p++)i(e[p],p,e);else if(e&&"object"==typeof e&&!o(e))for(var f in e)i(e[f],f,e)}var s=0,a=e;i(a),s||r(a)}}).call(e,function(){return this}())},function(t){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},function(t,e){(function(e){function r(t){return e.Buffer&&e.Buffer.isBuffer(t)||e.ArrayBuffer&&t instanceof ArrayBuffer}t.exports=r}).call(e,function(){return this}())},function(t,e,r){"use strict";function n(t,e){return this instanceof n?(t&&"object"===("undefined"==typeof t?"undefined":o(t))&&(e=t,t=void 0),e=e||{},e.path=e.path||"/socket.io",this.nsps={},this.subs=[],this.opts=e,this.reconnection(e.reconnection!==!1),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new l({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this.readyState="closed",this.uri=t,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[],this.encoder=new c.Encoder,this.decoder=new c.Decoder,this.autoConnect=e.autoConnect!==!1,void(this.autoConnect&&this.open())):new n(t,e)}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=r(18),s=r(44),a=r(35),c=r(7),u=r(46),h=r(47),p=r(3)("socket.io-client:manager"),f=r(42),l=r(48),d=Object.prototype.hasOwnProperty;t.exports=n,n.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var t in this.nsps)d.call(this.nsps,t)&&this.nsps[t].emit.apply(this.nsps[t],arguments)},n.prototype.updateSocketIds=function(){for(var t in this.nsps)d.call(this.nsps,t)&&(this.nsps[t].id=this.engine.id)},a(n.prototype),n.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection},n.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts},n.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay},n.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor},n.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax},n.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout},n.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},n.prototype.open=n.prototype.connect=function(t){if(p("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;p("opening %s",this.uri),this.engine=i(this.uri,this.opts);var r=this.engine,n=this;this.readyState="opening",this.skipReconnect=!1;var o=u(r,"open",function(){n.onopen(),t&&t()}),s=u(r,"error",function(e){if(p("connect_error"),n.cleanup(),n.readyState="closed",n.emitAll("connect_error",e),t){var r=new Error("Connection error");r.data=e,t(r)}else n.maybeReconnectOnOpen()});if(!1!==this._timeout){var a=this._timeout;p("connect attempt will timeout after %d",a);var c=setTimeout(function(){p("connect attempt timed out after %d",a),o.destroy(),r.close(),r.emit("error","timeout"),n.emitAll("connect_timeout",a)},a);this.subs.push({destroy:function(){clearTimeout(c)}})}return this.subs.push(o),this.subs.push(s),this},n.prototype.onopen=function(){p("open"),this.cleanup(),this.readyState="open",this.emit("open");var t=this.engine;this.subs.push(u(t,"data",h(this,"ondata"))),this.subs.push(u(t,"ping",h(this,"onping"))),this.subs.push(u(t,"pong",h(this,"onpong"))),this.subs.push(u(t,"error",h(this,"onerror"))),this.subs.push(u(t,"close",h(this,"onclose"))),this.subs.push(u(this.decoder,"decoded",h(this,"ondecoded")))},n.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},n.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},n.prototype.ondata=function(t){this.decoder.add(t)},n.prototype.ondecoded=function(t){this.emit("packet",t)},n.prototype.onerror=function(t){p("error",t),this.emitAll("error",t)},n.prototype.socket=function(t,e){function r(){~f(o.connecting,n)||o.connecting.push(n)}var n=this.nsps[t];if(!n){n=new s(this,t,e),this.nsps[t]=n;var o=this;n.on("connecting",r),n.on("connect",function(){n.id=o.engine.id}),this.autoConnect&&r()}return n},n.prototype.destroy=function(t){var e=f(this.connecting,t);~e&&this.connecting.splice(e,1),this.connecting.length||this.close()},n.prototype.packet=function(t){p("writing packet %j",t);var e=this;t.query&&0===t.type&&(t.nsp+="?"+t.query),e.encoding?e.packetBuffer.push(t):(e.encoding=!0,this.encoder.encode(t,function(r){for(var n=0;n<r.length;n++)e.engine.write(r[n],t.options);e.encoding=!1,e.processPacketQueue()}))},n.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var t=this.packetBuffer.shift();this.packet(t)}},n.prototype.cleanup=function(){p("cleanup");for(var t=this.subs.length,e=0;t>e;e++){var r=this.subs.shift();r.destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},n.prototype.close=n.prototype.disconnect=function(){p("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},n.prototype.onclose=function(t){p("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()},n.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)p("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var e=this.backoff.duration();p("will wait %dms before reconnect attempt",e),this.reconnecting=!0;var r=setTimeout(function(){t.skipReconnect||(p("attempting reconnect"),t.emitAll("reconnect_attempt",t.backoff.attempts),t.emitAll("reconnecting",t.backoff.attempts),t.skipReconnect||t.open(function(e){e?(p("reconnect attempt error"),t.reconnecting=!1,t.reconnect(),t.emitAll("reconnect_error",e.data)):(p("reconnect success"),t.onreconnect())}))},e);this.subs.push({destroy:function(){clearTimeout(r)}})}},n.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",t)}},function(t,e,r){t.exports=r(19)},function(t,e,r){t.exports=r(20),t.exports.parser=r(27)},function(t,e,r){(function(e){function n(t,r){if(!(this instanceof n))return new n(t,r);r=r||{},t&&"object"==typeof t&&(r=t,t=null),t?(t=h(t),r.hostname=t.host,r.secure="https"===t.protocol||"wss"===t.protocol,r.port=t.port,t.query&&(r.query=t.query)):r.host&&(r.hostname=h(r.host).host),this.secure=null!=r.secure?r.secure:e.location&&"https:"===location.protocol,r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.agent=r.agent||!1,this.hostname=r.hostname||(e.location?location.hostname:"localhost"),this.port=r.port||(e.location&&location.port?location.port:this.secure?443:80),this.query=r.query||{},"string"==typeof this.query&&(this.query=f.decode(this.query)),this.upgrade=!1!==r.upgrade,this.path=(r.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!r.forceJSONP,this.jsonp=!1!==r.jsonp,this.forceBase64=!!r.forceBase64,this.enablesXDR=!!r.enablesXDR,this.timestampParam=r.timestampParam||"t",this.timestampRequests=r.timestampRequests,this.transports=r.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=r.policyPort||843,this.rememberUpgrade=r.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=r.onlyBinaryUpgrades,this.perMessageDeflate=!1!==r.perMessageDeflate&&(r.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=r.pfx||null,this.key=r.key||null,this.passphrase=r.passphrase||null,this.cert=r.cert||null,this.ca=r.ca||null,this.ciphers=r.ciphers||null,this.rejectUnauthorized=void 0===r.rejectUnauthorized?null:r.rejectUnauthorized,this.forceNode=!!r.forceNode;var o="object"==typeof e&&e;o.global===o&&(r.extraHeaders&&Object.keys(r.extraHeaders).length>0&&(this.extraHeaders=r.extraHeaders),r.localAddress&&(this.localAddress=r.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}function o(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}var i=r(21),s=r(35),a=r(3)("engine.io-client:socket"),c=r(42),u=r(27),h=r(2),p=r(43),f=r(36);t.exports=n,n.priorWebsocketSuccess=!1,s(n.prototype),n.protocol=u.protocol,n.Socket=n,n.Transport=r(26),n.transports=r(21),n.parser=r(27),n.prototype.createTransport=function(t){a('creating transport "%s"',t);var e=o(this.query);e.EIO=u.protocol,e.transport=t,this.id&&(e.sid=this.id);var r=new i[t]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:e,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,extraHeaders:this.extraHeaders,forceNode:this.forceNode,localAddress:this.localAddress});return r},n.prototype.open=function(){var t;if(this.rememberUpgrade&&n.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length){var e=this;return void setTimeout(function(){e.emit("error","No transports available")},0)}t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)},n.prototype.setTransport=function(t){a("setting transport %s",t.name);var e=this;this.transport&&(a("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",function(){e.onDrain()}).on("packet",function(t){e.onPacket(t)}).on("error",function(t){e.onError(t)}).on("close",function(){e.onClose("transport close")})},n.prototype.probe=function(t){function e(){if(f.onlyBinaryUpgrades){var e=!this.supportsBinary&&f.transport.supportsBinary;p=p||e}p||(a('probe transport "%s" opened',t),h.send([{type:"ping",data:"probe"}]),h.once("packet",function(e){if(!p)if("pong"===e.type&&"probe"===e.data){if(a('probe transport "%s" pong',t),f.upgrading=!0,f.emit("upgrading",h),!h)return;n.priorWebsocketSuccess="websocket"===h.name,a('pausing current transport "%s"',f.transport.name),f.transport.pause(function(){p||"closed"!==f.readyState&&(a("changing transport and sending upgrade packet"),u(),f.setTransport(h),h.send([{type:"upgrade"}]),f.emit("upgrade",h),h=null,f.upgrading=!1,f.flush())})}else{a('probe transport "%s" failed',t);var r=new Error("probe error");r.transport=h.name,f.emit("upgradeError",r)}}))}function r(){p||(p=!0,u(),h.close(),h=null)}function o(e){var n=new Error("probe error: "+e);n.transport=h.name,r(),a('probe transport "%s" failed because of error: %s',t,e),f.emit("upgradeError",n)}function i(){o("transport closed")}function s(){o("socket closed")}function c(t){h&&t.name!==h.name&&(a('"%s" works - aborting "%s"',t.name,h.name),r())}function u(){h.removeListener("open",e),h.removeListener("error",o),h.removeListener("close",i),f.removeListener("close",s),f.removeListener("upgrading",c)}a('probing transport "%s"',t);var h=this.createTransport(t,{probe:1}),p=!1,f=this;n.priorWebsocketSuccess=!1,h.once("open",e),h.once("error",o),h.once("close",i),this.once("close",s),this.once("upgrading",c),h.open()},n.prototype.onOpen=function(){if(a("socket open"),this.readyState="open",n.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){a("starting upgrade probes");for(var t=0,e=this.upgrades.length;e>t;t++)this.probe(this.upgrades[t])}},n.prototype.onPacket=function(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(a('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(p(t.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emit("data",t.data),this.emit("message",t.data)}else a('packet received with socket readyState "%s"',this.readyState)},n.prototype.onHandshake=function(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},n.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var e=this;e.pingTimeoutTimer=setTimeout(function(){"closed"!==e.readyState&&e.onClose("ping timeout")},t||e.pingInterval+e.pingTimeout)},n.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout(function(){a("writing ping packet - expecting pong within %sms",t.pingTimeout),t.ping(),t.onHeartbeat(t.pingTimeout)},t.pingInterval)},n.prototype.ping=function(){var t=this;this.sendPacket("ping",function(){t.emit("ping")})},n.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},n.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(a("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},n.prototype.write=n.prototype.send=function(t,e,r){return this.sendPacket("message",t,e,r),this},n.prototype.sendPacket=function(t,e,r,n){if("function"==typeof e&&(n=e,e=void 0),"function"==typeof r&&(n=r,r=null),"closing"!==this.readyState&&"closed"!==this.readyState){r=r||{},r.compress=!1!==r.compress;var o={type:t,data:e,options:r};this.emit("packetCreate",o),this.writeBuffer.push(o),n&&this.once("flush",n),this.flush()}},n.prototype.close=function(){function t(){n.onClose("forced close"),a("socket closing - telling transport to close"),n.transport.close()}function e(){n.removeListener("upgrade",e),n.removeListener("upgradeError",e),t()}function r(){n.once("upgrade",e),n.once("upgradeError",e)}if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var n=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?r():t()}):this.upgrading?r():t()}return this},n.prototype.onError=function(t){a("socket error %j",t),n.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)},n.prototype.onClose=function(t,e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){a('socket close with reason: "%s"',t);var r=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",t,e),r.writeBuffer=[],r.prevBufferLen=0}},n.prototype.filterUpgrades=function(t){for(var e=[],r=0,n=t.length;n>r;r++)~c(this.transports,t[r])&&e.push(t[r]);return e}}).call(e,function(){return this}())},function(t,e,r){(function(t){function n(e){var r,n=!1,a=!1,c=!1!==e.jsonp;if(t.location){var u="https:"===location.protocol,h=location.port;h||(h=u?443:80),n=e.hostname!==location.hostname||h!==e.port,a=e.secure!==u}if(e.xdomain=n,e.xscheme=a,r=new o(e),"open"in r&&!e.forceJSONP)return new i(e);if(!c)throw new Error("JSONP disabled");return new s(e)}var o=r(22),i=r(24),s=r(39),a=r(40);e.polling=n,e.websocket=a}).call(e,function(){return this}())},function(t,e,r){(function(e){var n=r(23);t.exports=function(t){var r=t.xdomain,o=t.xscheme,i=t.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!r||n))return new XMLHttpRequest}catch(t){}try{if("undefined"!=typeof XDomainRequest&&!o&&i)return new XDomainRequest}catch(t){}if(!r)try{return new(e[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}}}).call(e,function(){return this}())},function(t){try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){t.exports=!1}},function(t,e,r){(function(e){function n(){}function o(t){if(c.call(this,t),this.requestTimeout=t.requestTimeout,e.location){var r="https:"===location.protocol,n=location.port;n||(n=r?443:80),this.xd=t.hostname!==e.location.hostname||n!==t.port,this.xs=t.secure!==r}else this.extraHeaders=t.extraHeaders}function i(t){this.method=t.method||"GET",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.requestTimeout=t.requestTimeout,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders,this.create()}function s(){for(var t in i.requests)i.requests.hasOwnProperty(t)&&i.requests[t].abort()}var a=r(22),c=r(25),u=r(35),h=r(37),p=r(3)("engine.io-client:polling-xhr");t.exports=o,t.exports.Request=i,h(o,c),o.prototype.supportsBinary=!0,o.prototype.request=function(t){return t=t||{},t.uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,t.requestTimeout=this.requestTimeout,t.extraHeaders=this.extraHeaders,new i(t)},o.prototype.doWrite=function(t,e){var r="string"!=typeof t&&void 0!==t,n=this.request({method:"POST",data:t,isBinary:r}),o=this;n.on("success",e),n.on("error",function(t){o.onError("xhr post error",t)}),this.sendXhr=n},o.prototype.doPoll=function(){p("xhr poll");var t=this.request(),e=this;t.on("data",function(t){e.onData(t)}),t.on("error",function(t){e.onError("xhr poll error",t)}),this.pollXhr=t},u(i.prototype),i.prototype.create=function(){var t={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized;var r=this.xhr=new a(t),n=this;try{p("xhr open %s: %s",this.method,this.uri),r.open(this.method,this.uri,this.async);try{if(this.extraHeaders){r.setDisableHeaderCheck(!0);for(var o in this.extraHeaders)this.extraHeaders.hasOwnProperty(o)&&r.setRequestHeader(o,this.extraHeaders[o])}}catch(t){}if(this.supportsBinary&&(r.responseType="arraybuffer"),"POST"===this.method)try{this.isBinary?r.setRequestHeader("Content-type","application/octet-stream"):r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}try{r.setRequestHeader("Accept","*/*")}catch(t){}"withCredentials"in r&&(r.withCredentials=!0),this.requestTimeout&&(r.timeout=this.requestTimeout),this.hasXDR()?(r.onload=function(){n.onLoad()},r.onerror=function(){n.onError(r.responseText)}):r.onreadystatechange=function(){4===r.readyState&&(200===r.status||1223===r.status?n.onLoad():setTimeout(function(){n.onError(r.status)},0))},p("xhr data %s",this.data),r.send(this.data)}catch(t){return void setTimeout(function(){n.onError(t)},0)}e.document&&(this.index=i.requestsCount++,i.requests[this.index]=this)},i.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},i.prototype.onData=function(t){this.emit("data",t),this.onSuccess()},i.prototype.onError=function(t){this.emit("error",t),this.cleanup(!0)},i.prototype.cleanup=function(t){if("undefined"!=typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=n:this.xhr.onreadystatechange=n,t)try{this.xhr.abort()}catch(t){}e.document&&delete i.requests[this.index],this.xhr=null}},i.prototype.onLoad=function(){var t;try{var e;try{e=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(t){}if("application/octet-stream"===e)t=this.xhr.response||this.xhr.responseText;else if(this.supportsBinary)try{t=String.fromCharCode.apply(null,new Uint8Array(this.xhr.response))}catch(e){for(var r=new Uint8Array(this.xhr.response),n=[],o=0,i=r.length;i>o;o++)n.push(r[o]);t=String.fromCharCode.apply(null,n)}else t=this.xhr.responseText}catch(t){this.onError(t)}null!=t&&this.onData(t)},i.prototype.hasXDR=function(){return"undefined"!=typeof e.XDomainRequest&&!this.xs&&this.enablesXDR},i.prototype.abort=function(){this.cleanup()
},i.requestsCount=0,i.requests={},e.document&&(e.attachEvent?e.attachEvent("onunload",s):e.addEventListener&&e.addEventListener("beforeunload",s,!1))}).call(e,function(){return this}())},function(t,e,r){function n(t){var e=t&&t.forceBase64;h&&!e||(this.supportsBinary=!1),o.call(this,t)}var o=r(26),i=r(36),s=r(27),a=r(37),c=r(38),u=r(3)("engine.io-client:polling");t.exports=n;var h=function(){var t=r(22),e=new t({xdomain:!1});return null!=e.responseType}();a(n,o),n.prototype.name="polling",n.prototype.doOpen=function(){this.poll()},n.prototype.pause=function(t){function e(){u("paused"),r.readyState="paused",t()}var r=this;if(this.readyState="pausing",this.polling||!this.writable){var n=0;this.polling&&(u("we are currently polling - waiting to pause"),n++,this.once("pollComplete",function(){u("pre-pause polling complete"),--n||e()})),this.writable||(u("we are currently writing - waiting to pause"),n++,this.once("drain",function(){u("pre-pause writing complete"),--n||e()}))}else e()},n.prototype.poll=function(){u("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},n.prototype.onData=function(t){var e=this;u("polling got data %s",t);var r=function(t){return"opening"===e.readyState&&e.onOpen(),"close"===t.type?(e.onClose(),!1):void e.onPacket(t)};s.decodePayload(t,this.socket.binaryType,r),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():u('ignoring poll - transport state "%s"',this.readyState))},n.prototype.doClose=function(){function t(){u("writing close packet"),e.write([{type:"close"}])}var e=this;"open"===this.readyState?(u("transport open - closing"),t()):(u("transport not open - deferring close"),this.once("open",t))},n.prototype.write=function(t){var e=this;this.writable=!1;var r=function(){e.writable=!0,e.emit("drain")};s.encodePayload(t,this.supportsBinary,function(t){e.doWrite(t,r)})},n.prototype.uri=function(){var t=this.query||{},e=this.secure?"https":"http",r="";!1!==this.timestampRequests&&(t[this.timestampParam]=c()),this.supportsBinary||t.sid||(t.b64=1),t=i.encode(t),this.port&&("https"===e&&443!==Number(this.port)||"http"===e&&80!==Number(this.port))&&(r=":"+this.port),t.length&&(t="?"+t);var n=-1!==this.hostname.indexOf(":");return e+"://"+(n?"["+this.hostname+"]":this.hostname)+r+this.path+t}},function(t,e,r){function n(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState="",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.forceNode=t.forceNode,this.extraHeaders=t.extraHeaders,this.localAddress=t.localAddress}var o=r(27),i=r(35);t.exports=n,i(n.prototype),n.prototype.onError=function(t,e){var r=new Error(t);return r.type="TransportError",r.description=e,this.emit("error",r),this},n.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},n.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},n.prototype.send=function(t){if("open"!==this.readyState)throw new Error("Transport not open");this.write(t)},n.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},n.prototype.onData=function(t){var e=o.decodePacket(t,this.socket.binaryType);this.onPacket(e)},n.prototype.onPacket=function(t){this.emit("packet",t)},n.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(t,e,r){(function(t){function n(t,r){var n="b"+e.packets[t.type]+t.data.data;return r(n)}function o(t,r,n){if(!r)return e.encodeBase64Packet(t,n);var o=t.data,i=new Uint8Array(o),s=new Uint8Array(1+o.byteLength);s[0]=v[t.type];for(var a=0;a<i.length;a++)s[a+1]=i[a];return n(s.buffer)}function i(t,r,n){if(!r)return e.encodeBase64Packet(t,n);var o=new FileReader;return o.onload=function(){t.data=o.result,e.encodePacket(t,r,!0,n)},o.readAsArrayBuffer(t.data)}function s(t,r,n){if(!r)return e.encodeBase64Packet(t,n);if(m)return i(t,r,n);var o=new Uint8Array(1);o[0]=v[t.type];var s=new k([o.buffer,t.data]);return n(s)}function a(t){try{t=d.decode(t)}catch(t){return!1}return t}function c(t,e,r){for(var n=new Array(t.length),o=l(t.length,r),i=function(t,r,o){e(r,function(e,r){n[t]=r,o(e,n)})},s=0;s<t.length;s++)i(s,t[s],o)}var u,h=r(28),p=r(29),f=r(30),l=r(31),d=r(32);t&&t.ArrayBuffer&&(u=r(33));var y="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),g="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),m=y||g;e.protocol=3;var v=e.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},b=h(v),w={type:"error",data:"parser error"},k=r(34);e.encodePacket=function(e,r,i,a){"function"==typeof r&&(a=r,r=!1),"function"==typeof i&&(a=i,i=null);var c=void 0===e.data?void 0:e.data.buffer||e.data;if(t.ArrayBuffer&&c instanceof ArrayBuffer)return o(e,r,a);if(k&&c instanceof t.Blob)return s(e,r,a);if(c&&c.base64)return n(e,a);var u=v[e.type];return void 0!==e.data&&(u+=i?d.encode(String(e.data)):String(e.data)),a(""+u)},e.encodeBase64Packet=function(r,n){var o="b"+e.packets[r.type];if(k&&r.data instanceof t.Blob){var i=new FileReader;return i.onload=function(){var t=i.result.split(",")[1];n(o+t)},i.readAsDataURL(r.data)}var s;try{s=String.fromCharCode.apply(null,new Uint8Array(r.data))}catch(t){for(var a=new Uint8Array(r.data),c=new Array(a.length),u=0;u<a.length;u++)c[u]=a[u];s=String.fromCharCode.apply(null,c)}return o+=t.btoa(s),n(o)},e.decodePacket=function(t,r,n){if(void 0===t)return w;if("string"==typeof t){if("b"==t.charAt(0))return e.decodeBase64Packet(t.substr(1),r);if(n&&(t=a(t),t===!1))return w;var o=t.charAt(0);return Number(o)==o&&b[o]?t.length>1?{type:b[o],data:t.substring(1)}:{type:b[o]}:w}var i=new Uint8Array(t),o=i[0],s=f(t,1);return k&&"blob"===r&&(s=new k([s])),{type:b[o],data:s}},e.decodeBase64Packet=function(t,e){var r=b[t.charAt(0)];if(!u)return{type:r,data:{base64:!0,data:t.substr(1)}};var n=u.decode(t.substr(1));return"blob"===e&&k&&(n=new k([n])),{type:r,data:n}},e.encodePayload=function(t,r,n){function o(t){return t.length+":"+t}function i(t,n){e.encodePacket(t,!!s&&r,!0,function(t){n(null,o(t))})}"function"==typeof r&&(n=r,r=null);var s=p(t);return r&&s?k&&!m?e.encodePayloadAsBlob(t,n):e.encodePayloadAsArrayBuffer(t,n):t.length?void c(t,i,function(t,e){return n(e.join(""))}):n("0:")},e.decodePayload=function(t,r,n){if("string"!=typeof t)return e.decodePayloadAsBinary(t,r,n);"function"==typeof r&&(n=r,r=null);var o;if(""==t)return n(w,0,1);for(var i,s,a="",c=0,u=t.length;u>c;c++){var h=t.charAt(c);if(":"!=h)a+=h;else{if(""==a||a!=(i=Number(a)))return n(w,0,1);if(s=t.substr(c+1,i),a!=s.length)return n(w,0,1);if(s.length){if(o=e.decodePacket(s,r,!0),w.type==o.type&&w.data==o.data)return n(w,0,1);var p=n(o,c+i,u);if(!1===p)return}c+=i,a=""}}return""!=a?n(w,0,1):void 0},e.encodePayloadAsArrayBuffer=function(t,r){function n(t,r){e.encodePacket(t,!0,!0,function(t){return r(null,t)})}return t.length?void c(t,n,function(t,e){var n=e.reduce(function(t,e){var r;return r="string"==typeof e?e.length:e.byteLength,t+r.toString().length+r+2},0),o=new Uint8Array(n),i=0;return e.forEach(function(t){var e="string"==typeof t,r=t;if(e){for(var n=new Uint8Array(t.length),s=0;s<t.length;s++)n[s]=t.charCodeAt(s);r=n.buffer}o[i++]=e?0:1;for(var a=r.byteLength.toString(),s=0;s<a.length;s++)o[i++]=parseInt(a[s]);o[i++]=255;for(var n=new Uint8Array(r),s=0;s<n.length;s++)o[i++]=n[s]}),r(o.buffer)}):r(new ArrayBuffer(0))},e.encodePayloadAsBlob=function(t,r){function n(t,r){e.encodePacket(t,!0,!0,function(t){var e=new Uint8Array(1);if(e[0]=1,"string"==typeof t){for(var n=new Uint8Array(t.length),o=0;o<t.length;o++)n[o]=t.charCodeAt(o);t=n.buffer,e[0]=0}for(var i=t instanceof ArrayBuffer?t.byteLength:t.size,s=i.toString(),a=new Uint8Array(s.length+1),o=0;o<s.length;o++)a[o]=parseInt(s[o]);if(a[s.length]=255,k){var c=new k([e.buffer,a.buffer,t]);r(null,c)}})}c(t,n,function(t,e){return r(new k(e))})},e.decodePayloadAsBinary=function(t,r,n){"function"==typeof r&&(n=r,r=null);for(var o=t,i=[],s=!1;o.byteLength>0;){for(var a=new Uint8Array(o),c=0===a[0],u="",h=1;255!=a[h];h++){if(u.length>310){s=!0;break}u+=a[h]}if(s)return n(w,0,1);o=f(o,2+u.length),u=parseInt(u);var p=f(o,0,u);if(c)try{p=String.fromCharCode.apply(null,new Uint8Array(p))}catch(t){var l=new Uint8Array(p);p="";for(var h=0;h<l.length;h++)p+=String.fromCharCode(l[h])}i.push(p),o=f(o,u)}var d=i.length;i.forEach(function(t,o){n(e.decodePacket(t,r,!0),o,d)})}}).call(e,function(){return this}())},function(t){t.exports=Object.keys||function(t){var e=[],r=Object.prototype.hasOwnProperty;for(var n in t)r.call(t,n)&&e.push(n);return e}},function(t,e,r){(function(e){function n(t){function r(t){if(!t)return!1;if(e.Buffer&&e.Buffer.isBuffer&&e.Buffer.isBuffer(t)||e.ArrayBuffer&&t instanceof ArrayBuffer||e.Blob&&t instanceof Blob||e.File&&t instanceof File)return!0;if(o(t)){for(var n=0;n<t.length;n++)if(r(t[n]))return!0}else if(t&&"object"==typeof t){t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON());for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&r(t[i]))return!0}return!1}return r(t)}var o=r(15);t.exports=n}).call(e,function(){return this}())},function(t){t.exports=function(t,e,r){var n=t.byteLength;if(e=e||0,r=r||n,t.slice)return t.slice(e,r);if(0>e&&(e+=n),0>r&&(r+=n),r>n&&(r=n),e>=n||e>=r||0===n)return new ArrayBuffer(0);for(var o=new Uint8Array(t),i=new Uint8Array(r-e),s=e,a=0;r>s;s++,a++)i[a]=o[s];return i.buffer}},function(t){function r(t,e,r){function o(t,n){if(o.count<=0)throw new Error("after called too many times");--o.count,t?(i=!0,e(t),e=r):0!==o.count||i||e(null,n)}var i=!1;return r=r||n,o.count=t,0===t?e():o}function n(){}t.exports=r},function(t,e,r){var n;(function(t,o){!function(i){function s(t){for(var e,r,n=[],o=0,i=t.length;i>o;)e=t.charCodeAt(o++),e>=55296&&56319>=e&&i>o?(r=t.charCodeAt(o++),56320==(64512&r)?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),o--)):n.push(e);return n}function a(t){for(var e,r=t.length,n=-1,o="";++n<r;)e=t[n],e>65535&&(e-=65536,o+=b(e>>>10&1023|55296),e=56320|1023&e),o+=b(e);return o}function c(t,e){return b(t>>e&63|128)}function u(t){if(0==(4294967168&t))return b(t);var e="";return 0==(4294965248&t)?e=b(t>>6&31|192):0==(4294901760&t)?(e=b(t>>12&15|224),e+=c(t,6)):0==(4292870144&t)&&(e=b(t>>18&7|240),e+=c(t,12),e+=c(t,6)),e+=b(63&t|128)}function h(t){for(var e,r=s(t),n=r.length,o=-1,i="";++o<n;)e=r[o],i+=u(e);return i}function p(){if(v>=m)throw Error("Invalid byte index");var t=255&g[v];if(v++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function f(){var t,e,r,n,o;if(v>m)throw Error("Invalid byte index");if(v==m)return!1;if(t=255&g[v],v++,0==(128&t))return t;if(192==(224&t)){var e=p();if(o=(31&t)<<6|e,o>=128)return o;throw Error("Invalid continuation byte")}if(224==(240&t)){if(e=p(),r=p(),o=(15&t)<<12|e<<6|r,o>=2048)return o;throw Error("Invalid continuation byte")}if(240==(248&t)&&(e=p(),r=p(),n=p(),o=(15&t)<<18|e<<12|r<<6|n,o>=65536&&1114111>=o))return o;throw Error("Invalid WTF-8 detected")}function l(t){g=s(t),m=g.length,v=0;for(var e,r=[];(e=f())!==!1;)r.push(e);return a(r)}var d="object"==typeof e&&e,y=("object"==typeof t&&t&&t.exports==d&&t,"object"==typeof o&&o);y.global!==y&&y.window!==y||(i=y);var g,m,v,b=String.fromCharCode,w={version:"1.0.0",encode:h,decode:l};n=function(){return w}.call(e,r,e,t),!(void 0!==n&&(t.exports=n))}(this)}).call(e,r(12)(t),function(){return this}())},function(t,e){!function(){"use strict";for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=new Uint8Array(256),n=0;n<t.length;n++)r[t.charCodeAt(n)]=n;e.encode=function(e){var r,n=new Uint8Array(e),o=n.length,i="";for(r=0;o>r;r+=3)i+=t[n[r]>>2],i+=t[(3&n[r])<<4|n[r+1]>>4],i+=t[(15&n[r+1])<<2|n[r+2]>>6],i+=t[63&n[r+2]];return o%3===2?i=i.substring(0,i.length-1)+"=":o%3===1&&(i=i.substring(0,i.length-2)+"=="),i},e.decode=function(t){var e,n,o,i,s,a=.75*t.length,c=t.length,u=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var h=new ArrayBuffer(a),p=new Uint8Array(h);for(e=0;c>e;e+=4)n=r[t.charCodeAt(e)],o=r[t.charCodeAt(e+1)],i=r[t.charCodeAt(e+2)],s=r[t.charCodeAt(e+3)],p[u++]=n<<2|o>>4,p[u++]=(15&o)<<4|i>>2,p[u++]=(3&i)<<6|63&s;return h}}()},function(t,e){(function(e){function r(t){for(var e=0;e<t.length;e++){var r=t[e];if(r.buffer instanceof ArrayBuffer){var n=r.buffer;if(r.byteLength!==n.byteLength){var o=new Uint8Array(r.byteLength);o.set(new Uint8Array(n,r.byteOffset,r.byteLength)),n=o.buffer}t[e]=n}}}function n(t,e){e=e||{};var n=new i;r(t);for(var o=0;o<t.length;o++)n.append(t[o]);return e.type?n.getBlob(e.type):n.getBlob()}function o(t,e){return r(t),new Blob(t,e||{})}var i=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,s=function(){try{var t=new Blob(["hi"]);return 2===t.size}catch(t){return!1}}(),a=s&&function(){try{var t=new Blob([new Uint8Array([1,2])]);return 2===t.size}catch(t){return!1}}(),c=i&&i.prototype.append&&i.prototype.getBlob;t.exports=function(){return s?a?e.Blob:o:c?n:void 0}()}).call(e,function(){return this}())},function(t){function n(t){return t?o(t):void 0}function o(t){for(var e in n.prototype)t[e]=n.prototype[e];return t}t.exports=n,n.prototype.on=n.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},n.prototype.once=function(t,e){function r(){this.off(t,r),e.apply(this,arguments)}return r.fn=e,this.on(t,r),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks["$"+t];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var n,o=0;o<r.length;o++)if(n=r[o],n===e||n.fn===e){r.splice(o,1);break}return this},n.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),r=this._callbacks["$"+t];if(r){r=r.slice(0);for(var n=0,o=r.length;o>n;++n)r[n].apply(this,e)}return this},n.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},n.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e){e.encode=function(t){var e="";for(var r in t)t.hasOwnProperty(r)&&(e.length&&(e+="&"),e+=encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e},e.decode=function(t){for(var e={},r=t.split("&"),n=0,o=r.length;o>n;n++){var i=r[n].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}},function(t){t.exports=function(t,e){var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},function(t){"use strict";function r(t){var e="";do e=s[t%a]+e,t=Math.floor(t/a);while(t>0);return e}function n(t){var e=0;for(h=0;h<t.length;h++)e=e*a+c[t.charAt(h)];return e}function o(){var t=r(+new Date);return t!==i?(u=0,i=t):t+"."+r(u++)}for(var i,s="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),a=64,c={},u=0,h=0;a>h;h++)c[s[h]]=h;o.encode=r,o.decode=n,t.exports=o},function(t,e,r){(function(e){function n(){}function o(t){i.call(this,t),this.query=this.query||{},a||(e.___eio||(e.___eio=[]),a=e.___eio),this.index=a.length;var r=this;a.push(function(t){r.onData(t)}),this.query.j=this.index,e.document&&e.addEventListener&&e.addEventListener("beforeunload",function(){r.script&&(r.script.onerror=n)},!1)}var i=r(25),s=r(37);t.exports=o;var a,c=/\n/g,u=/\\n/g;s(o,i),o.prototype.supportsBinary=!1,o.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),i.prototype.doClose.call(this)},o.prototype.doPoll=function(){var t=this,e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(e){t.onError("jsonp poll error",e)};var r=document.getElementsByTagName("script")[0];r?r.parentNode.insertBefore(e,r):(document.head||document.body).appendChild(e),this.script=e;var n="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);n&&setTimeout(function(){var t=document.createElement("iframe");document.body.appendChild(t),document.body.removeChild(t)},100)},o.prototype.doWrite=function(t,e){function r(){n(),e()}function n(){if(o.iframe)try{o.form.removeChild(o.iframe)}catch(t){o.onError("jsonp polling iframe removal error",t)}try{var t='<iframe src="javascript:0" name="'+o.iframeId+'">';i=document.createElement(t)}catch(t){i=document.createElement("iframe"),i.name=o.iframeId,i.src="javascript:0"}i.id=o.iframeId,o.form.appendChild(i),o.iframe=i}var o=this;if(!this.form){var i,s=document.createElement("form"),a=document.createElement("textarea"),h=this.iframeId="eio_iframe_"+this.index;s.className="socketio",s.style.position="absolute",s.style.top="-1000px",s.style.left="-1000px",s.target=h,s.method="POST",s.setAttribute("accept-charset","utf-8"),a.name="d",s.appendChild(a),document.body.appendChild(s),this.form=s,this.area=a}this.form.action=this.uri(),n(),t=t.replace(u,"\\\n"),this.area.value=t.replace(c,"\\n");try{this.form.submit()}catch(t){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===o.iframe.readyState&&r()}:this.iframe.onload=r}}).call(e,function(){return this}())},function(t,e,r){(function(e){function n(t){var e=t&&t.forceBase64;e&&(this.supportsBinary=!1),this.perMessageDeflate=t.perMessageDeflate,this.usingBrowserWebSocket=p&&!t.forceNode,this.usingBrowserWebSocket||(f=o),i.call(this,t)}var o,i=r(26),s=r(27),a=r(36),c=r(37),u=r(38),h=r(3)("engine.io-client:websocket"),p=e.WebSocket||e.MozWebSocket;if("undefined"==typeof window)try{o=r(41)}catch(t){}var f=p;f||"undefined"!=typeof window||(f=o),t.exports=n,c(n,i),n.prototype.name="websocket",n.prototype.supportsBinary=!0,n.prototype.doOpen=function(){if(this.check()){var t=this.uri(),e=void 0,r={agent:this.agent,perMessageDeflate:this.perMessageDeflate};r.pfx=this.pfx,r.key=this.key,r.passphrase=this.passphrase,r.cert=this.cert,r.ca=this.ca,r.ciphers=this.ciphers,r.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(r.headers=this.extraHeaders),this.localAddress&&(r.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket?new f(t):new f(t,e,r)}catch(t){return this.emit("error",t)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},n.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}},n.prototype.write=function(t){function r(){n.emit("flush"),setTimeout(function(){n.writable=!0,n.emit("drain")},0)}var n=this;this.writable=!1;for(var o=t.length,i=0,a=o;a>i;i++)!function(t){s.encodePacket(t,n.supportsBinary,function(i){if(!n.usingBrowserWebSocket){var s={};if(t.options&&(s.compress=t.options.compress),n.perMessageDeflate){var a="string"==typeof i?e.Buffer.byteLength(i):i.length;a<n.perMessageDeflate.threshold&&(s.compress=!1)}}try{n.usingBrowserWebSocket?n.ws.send(i):n.ws.send(i,s)}catch(t){h("websocket closed before onclose event")}--o||r()})}(t[i])},n.prototype.onClose=function(){i.prototype.onClose.call(this)},n.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()},n.prototype.uri=function(){var t=this.query||{},e=this.secure?"wss":"ws",r="";this.port&&("wss"===e&&443!==Number(this.port)||"ws"===e&&80!==Number(this.port))&&(r=":"+this.port),this.timestampRequests&&(t[this.timestampParam]=u()),this.supportsBinary||(t.b64=1),t=a.encode(t),t.length&&(t="?"+t);var n=-1!==this.hostname.indexOf(":");return e+"://"+(n?"["+this.hostname+"]":this.hostname)+r+this.path+t},n.prototype.check=function(){return!(!f||"__initialize"in f&&this.name===n.prototype.name)}}).call(e,function(){return this}())},function(){},function(t){var r=[].indexOf;t.exports=function(t,e){if(r)return t.indexOf(e);for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}},function(t,e){(function(e){var r=/^[\],:{}\s]*$/,n=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,o=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,i=/(?:^|:|,)(?:\s*\[)+/g,s=/^\s+/,a=/\s+$/;t.exports=function(t){return"string"==typeof t&&t?(t=t.replace(s,"").replace(a,""),e.JSON&&JSON.parse?JSON.parse(t):r.test(t.replace(n,"@").replace(o,"]").replace(i,""))?new Function("return "+t)():void 0):null}}).call(e,function(){return this}())},function(t,e,r){"use strict";function n(t,e,r){this.io=t,this.nsp=e,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,r&&r.query&&(this.query=r.query),this.io.autoConnect&&this.open()}var o=r(7),i=r(35),s=r(45),a=r(46),c=r(47),u=r(3)("socket.io-client:socket"),h=r(29);t.exports=e=n;var p={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},f=i.prototype.emit;i(n.prototype),n.prototype.subEvents=function(){if(!this.subs){var t=this.io;this.subs=[a(t,"open",c(this,"onopen")),a(t,"packet",c(this,"onpacket")),a(t,"close",c(this,"onclose"))]}},n.prototype.open=n.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting"),this)},n.prototype.send=function(){var t=s(arguments);return t.unshift("message"),this.emit.apply(this,t),this},n.prototype.emit=function(t){if(p.hasOwnProperty(t))return f.apply(this,arguments),this;var e=s(arguments),r=o.EVENT;h(e)&&(r=o.BINARY_EVENT);var n={type:r,data:e};return n.options={},n.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof e[e.length-1]&&(u("emitting packet with ack id %d",this.ids),this.acks[this.ids]=e.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),delete this.flags,this},n.prototype.packet=function(t){t.nsp=this.nsp,this.io.packet(t)},n.prototype.onopen=function(){u("transport is open - connecting"),"/"!==this.nsp&&this.packet(this.query?{type:o.CONNECT,query:this.query}:{type:o.CONNECT})},n.prototype.onclose=function(t){u("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",t)},n.prototype.onpacket=function(t){if(t.nsp===this.nsp)switch(t.type){case o.CONNECT:this.onconnect();break;case o.EVENT:this.onevent(t);break;case o.BINARY_EVENT:this.onevent(t);break;case o.ACK:this.onack(t);break;case o.BINARY_ACK:this.onack(t);break;case o.DISCONNECT:this.ondisconnect();break;case o.ERROR:this.emit("error",t.data)}},n.prototype.onevent=function(t){var e=t.data||[];u("emitting event %j",e),null!=t.id&&(u("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?f.apply(this,e):this.receiveBuffer.push(e)},n.prototype.ack=function(t){var e=this,r=!1;return function(){if(!r){r=!0;var n=s(arguments);u("sending ack %j",n);var i=h(n)?o.BINARY_ACK:o.ACK;e.packet({type:i,id:t,data:n})}}},n.prototype.onack=function(t){var e=this.acks[t.id];"function"==typeof e?(u("calling ack %s with %j",t.id,t.data),e.apply(this,t.data),delete this.acks[t.id]):u("bad ack %s",t.id)},n.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},n.prototype.emitBuffered=function(){var t;for(t=0;t<this.receiveBuffer.length;t++)f.apply(this,this.receiveBuffer[t]);for(this.receiveBuffer=[],t=0;t<this.sendBuffer.length;t++)this.packet(this.sendBuffer[t]);this.sendBuffer=[]},n.prototype.ondisconnect=function(){u("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},n.prototype.destroy=function(){if(this.subs){for(var t=0;t<this.subs.length;t++)this.subs[t].destroy();this.subs=null}this.io.destroy(this)},n.prototype.close=n.prototype.disconnect=function(){return this.connected&&(u("performing disconnect (%s)",this.nsp),this.packet({type:o.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},n.prototype.compress=function(t){return this.flags=this.flags||{},this.flags.compress=t,this}},function(t){function r(t,e){var r=[];e=e||0;for(var n=e||0;n<t.length;n++)r[n-e]=t[n];return r}t.exports=r},function(t){"use strict";function r(t,e,r){return t.on(e,r),{destroy:function(){t.removeListener(e,r)}}}t.exports=r},function(t){var r=[].slice;t.exports=function(t,e){if("string"==typeof e&&(e=t[e]),"function"!=typeof e)throw new Error("bind() requires a function");var n=r.call(arguments,2);return function(){return e.apply(t,n.concat(r.call(arguments)))}}},function(t){function r(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}t.exports=r,r.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),r=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-r:t+r}return 0|Math.min(t,this.max)},r.prototype.reset=function(){this.attempts=0},r.prototype.setMin=function(t){this.ms=t},r.prototype.setMax=function(t){this.max=t},r.prototype.setJitter=function(t){this.jitter=t}}])}),define("modules/footer_button_mute",[],function(){var footer_button_mute={init:function(opt){var that=this;that.opt=that.deal_opt.apply(that,[opt]),that.button_mute=$(that.opt.button_mute_selector),that.button_mute.length>0&&(that.judge.apply(that),that.Listener.apply(that))},deal_opt:function(opt){var opt_default={button_mute_selector:".footer_button .mute"};return $.extend(opt_default,opt)},judge:function(){var that=this;localStorage.chat_service_gj_mute=localStorage.chat_service_gj_mute||"yes","no"==localStorage.chat_service_gj_mute?that.button_mute.addClass("cancel"):that.button_mute.removeClass("cancel")},Listener:function(){var that=this;that.button_mute.unbind().on("touchstart mousedown",function(e){e.preventDefault(),$(this).toggleClass("cancel"),localStorage.chat_service_gj_mute="yes"==localStorage.chat_service_gj_mute?"no":"yes"})}};return footer_button_mute}),define("app/chat_list",["lib/functions","lib/LayerShow","lib/jroll","lib/socket.io.min","modules/footer_button_mute"],function($func,$LayerShow,$jroll,$io,$footer_button_mute){var chat_list={loadingToast:$(".loadingToast"),init:function(){var that=this;that.judge_LayerShow_auto.apply(that),that.add_button_Listener.apply(that),that.mute_button_Listener.apply(that)},judge_LayerShow_auto:function(){var that=this;0===$(".comm_chat_list_template li:not(.template)").length?that.add_button_Handler.apply(that):that.socket_connect.apply(that)},socket_connect:function(){var that=this;that.socket=$io.connect(Base_meta.GLOBAL_SOCKET_URL),that.socket_connect_success.apply(that)},socket_connect_success:function(){var that=this;that.socket.on("connect_success",function(){var sid="",chat_line_obj=$(".comm_chat_list_template li.chat_line:not(.template)");chat_line_obj.forEach(function(li){""!==sid&&(sid+="|"),sid+=$(li).attr("sid")});var changeData={kind:1,cid:Base_meta.cid,sid:sid};that.send_join_room.apply(that,[changeData]),that.socket_send_message.apply(that)})},send_join_room:function(changeData){var that=this;that.socket.emit("join_room",changeData)},socket_send_message:function(){var that=this,audio_newMessage=document.getElementById("newMessage"),button_mute=$(".footer_button .mute");that.socket.on("send_message",function(kind,msg,cid,sid,rdate_locale,rdate){button_mute.hasClass("cancel")&&(audio_newMessage.muted=!1,audio_newMessage.play());var chat_line=$(".chat_line.sid_"+sid);chat_line.find(".last_time").text($func.dateFormat_wx(rdate)),chat_line.find(".last_content").html(msg),chat_line.addClass("new"),0!==chat_line.parent().find("li").index(chat_line)&&chat_line.prependTo(".comm_chat_list_template")})},add_button_Listener:function(){var that=this;$(".footer_button input.weui-btn_primary").unbind().on("click",function(){that.add_button_Handler.apply(that)})},mute_button_Listener:function(){$footer_button_mute.init.apply($footer_button_mute)},add_button_Handler:function(){var that=this;that.loadingToast.css("display","block"),that.getSortHtml.apply(that,[function(){that.LayerShow.apply(that)}])},getSortHtml:function(callback){var that=this;that.sortHtml?callback&&callback():$.ajax({url:"/chat/getSort",type:"post",success:function(result){that.sortHtml=result,callback&&callback()}})},LayerShow:function(){var that=this;that.layershow||(that.layershow=new $LayerShow);var opt={showKind:2,info_content:that.sortHtml,JRoll_obj:$jroll,callback_success:function(_jroll){that.loadingToast.css("display","none"),that.LayerShow_filterSelected.apply(that,[$(_jroll.wrapper).find(".sort_b")])}};that.layershow.show(opt)},LayerShow_filterSelected:function(sort_obj){sort_obj.unbind().on("click",function(){location.href="/chat?cid="+Base_meta.cid+"&bid=-1&sort="+$(this).attr("scid"),$(this).addClass("isChecked").unbind()});var sort="";$(".comm_chat_list_template .chat_line").forEach(function(obj){sort+=$(obj).attr("sort")}),sort_obj.forEach(function(s){var _obj=$(s);sort.indexOf("<"+_obj.attr("scid")+">")>-1&&_obj.addClass("isChecked").unbind()})}};return chat_list}),"function"==typeof define&&define.amd&&define("lib/RotatingBanner",[],function(){return RotatingBanner}),define("modules/emotion",["lib/RotatingBanner"],function($rb){var emotion={init:function(opt){var that=this;that.opt_deal.apply(that,[opt]),that.set_picUlSelector_width.apply(that),that.Rotating_Listener.apply(that)},opt_deal:function(opt){var that=this,opt_default={mobile_effect:!0,box_selector:".emotion_box",pic_ul_selector:".emotion_panel",point_ul_selector:".emotion_box .point_ul",pic_li_selector:"li.screen_li",point_autoCreate:!0,duration:200,resize_li:!1,mobile_effect_touchmove_distance_vw:10};that.opt=$.extend(opt_default,opt)},set_picUlSelector_width:function(){var that=this,panel=$(that.opt.pic_ul_selector),ul=panel.find("ul"),window_width_px=$(window).width();panel.css({width:ul.length*window_width_px+"px"})},Rotating_Listener:function(){var that=this,RotatingBanner_1=new $rb;RotatingBanner_1.init(that.opt)},emotion_filter:function(msg){var name_index,regExp=new RegExp(/((?:\[)*)(\[.+?\])/g);return msg=msg.replace(regExp,function(m,$1,$2){return name_index=comm_emotion.emotion_name_list.indexOf($2),-1==name_index?m:$1+'<span class="emotion" style="background-image:url(\'/inc/emotion/Expression_'+name_index+".png');\"></span>"})},emotion_filter_1:function(msg){for(var result,name_index,regExp_base_str="(\\[.+?\\])",regExp_ext_str="",regExp=new RegExp("()"+regExp_base_str),replace_callback=function(m,$1){return function(){return $1+'<span class="emotion" style="background-image:url(\'/inc/emotion/Expression_'+name_index+".png');\"></span>"}()};;){if(result=regExp.exec(msg),!result)break;name_index=comm_emotion.emotion_name_list.indexOf(result[2]),-1==name_index?(regExp_ext_str+="\\"+result[2].replace("]","\\]")+".*?",regExp=new RegExp("("+regExp_ext_str+")"+regExp_base_str)):msg=msg.replace(regExp,replace_callback)}return msg}};return emotion}),define("app/chat",["lib/socket.io.min","lib/functions","modules/footer_button_mute","modules/emotion"],function($io,$func,$footer_button_mute,$emotion){var chat={RECORD_COUNT:10,init:function(){var that=this;$footer_button_mute.init.apply($footer_button_mute),that.loadingToast=$(".loadingToast"),that.iosDialog2=$("#iosDialog2"),that.title_height_px=window.screen.height-window.innerHeight,that.deal_err.apply(that)
},jduge_show_more_records:function(){var that=this,message_li_count=$(".message:not(.template)").length;message_li_count>=that.RECORD_COUNT&&($(".more_record:not(.show)").addClass("show"),that.show_more_records_Listener.apply(that))},show_more_records_Listener:function(){var that=this;$(".more_record.show").unbind().on("touchstart mousedown",function(e){e.preventDefault(),$.ajax({url:"/getMoreRecords",type:"post",data:{cid:Base_meta.cid.toString(),sid:Base_meta.sid,start_count:$(".list .message:not(.template)").length},beforeSend:function(){that.loadingToast.find(".weui-toast__content").text(""),that.loadingToast.css("display","block")},success:function(result){that.loadingToast.css("display","none");var more_record=$("ul.list .more_record"),c=0;result.forEach&&result.forEach(function(r){c++;var kind;switch(r.sender){case"c":kind=2;break;case"s":kind=3;break;default:c--,kind=1}that.send_message(kind,r.content,r.cid,r.sid,!0)}),c<that.RECORD_COUNT?more_record.removeClass("show"):more_record.prependTo("ul.list")}})})},rollToBottom:function(){setTimeout(function(){var stoped_wrapper=$(".stoped_wrapper"),stoped_wrapper_scrollheight_px=stoped_wrapper[0].scrollHeight,stoped_wrapper_height_px=stoped_wrapper.height();stoped_wrapper.scrollTop(stoped_wrapper_scrollheight_px-stoped_wrapper_height_px)},500)},set_messageContent_height:function(){var footer_button=$(".footer_button"),submit_height_px=parseFloat(footer_button.find(".weui-btn_primary").css("line-height").replace("px",""));footer_button.find(".message_content_box,.message_content_div,.message_content_input").css({height:submit_height_px+"px","line-height":submit_height_px+"px"}),footer_button.find(".message_content_box").css("display","block")},messageContentBox_Listener:function(){var message_content_box=$(".message_content_box"),message_div=message_content_box.find(".message_content_div"),message_input=message_content_box.find(".message_content_input");message_content_box.unbind().on("click",function(){message_div.css("display","none"),message_input.css("display","block")})},messageContentInput_change_Listener:function(){var message_content_box=$(".message_content_box"),message_div=message_content_box.find(".message_content_div"),message_input=message_content_box.find(".message_content_input");message_input.unbind("change").on("change",function(){message_div.text(message_input.val())})},deal_err:function(){var that=this;"noServicers"==Base_meta.err?that.show_error_dialog("Sorry~",function(){location.href="/?cid="+Base_meta.cid}):"sidError"==Base_meta.err?that.show_error_dialog("",function(){location.href="/?cid="+Base_meta.cid}):(that.set_messageContent_height.apply(that),that.messageContentBox_Listener.apply(that),that.messageContentInput_change_Listener.apply(that),that.jduge_show_more_records.apply(that),$func.fix_ios_fixed_bottom_input(".footer_button input[type=text]"),that.rollToBottom.apply(that),that.form_send_submit_Listener.apply(that),that.socket_connect.apply(that),that.socket_connect_success.apply(that),that.socket_send_message.apply(that),that.back_button_Listener.apply(that),that.emotion_button_Listener.apply(that),$emotion.init.apply($emotion,[{device:"mobile"}]))},socket_connect:function(){var that=this;"1"==Base_meta.kind&&that.send_message.apply(that,[1,Base_meta.welcome_message]),that.socket=$io.connect(Base_meta.GLOBAL_SOCKET_URL)},socket_connect_success:function(){var that=this;that.socket.on("connect_success",function(){$(".footer_button").css("display","block");var changeData={kind:Base_meta.kind,cid:Base_meta.cid,sid:Base_meta.sid};that.send_join_room.apply(that,[changeData])})},socket_send_message:function(){var that=this;that.socket.on("send_message",function(kind,msg,cid,sid,rdate){that.update_noRead_record.apply(that,[cid,sid]),that.send_message.apply(that,[kind,msg,cid,sid,rdate])})},update_noRead_record:function(cid,sid){$.ajax({url:"/update_noRead_record_client",type:"post",data:{cid:cid,sid:sid}})},send_message:function(kind,msg,cid,sid,prepend){var that=this;prepend=prepend||!1;var date=new Date;if(3==kind&&$(".footer_button .mute").hasClass("cancel")&&prepend!==!0){var newMessage_audio=document.getElementById("newMessage");newMessage_audio.muted=!1,newMessage_audio.play()}2==kind&&prepend!==!0&&that.socket.emit("send_message",msg,"c",cid,sid,date);var li;switch(kind){case 1:li=$("li.template.center").clone();break;case 2:li=$("li.template.right").clone();break;case 3:li=$("li.template.left").clone()}1!=kind&&prepend!==!0&&((!that.lastTime||date.getTime()-that.lastTime>=6e4)&&that.send_message.apply(that,[1,$func.dateFormat_wx(date)]),that.lastTime=date.getTime()),kind>1&&(msg=$emotion.emotion_filter(msg)),li.find("p").html('<span class="arrow"></span>'+msg),2==kind?li.find("img").attr("src",Base_meta.client_headimg):3==kind&&(li.find(".name").text(Base_meta.sname),li.find("img").attr("src",Base_meta.servicer_headimg)),li.removeClass("template"),prepend===!0?li.prependTo("ul.list"):li.appendTo("ul.list");var stoped_wrapper=$(".stoped_wrapper");if(prepend===!0)stoped_wrapper.scrollTop(0);else{var ul=li.parents(".list"),ul_padding_bottom_px=(ul.css("padding-bottom")||"").replace("px",""),ul_height_px=parseFloat(ul.height())+parseFloat(ul_padding_bottom_px)+parseFloat($(".fixed_space").height()),stoped_wrapper_height_px=stoped_wrapper.height();ul_height_px>stoped_wrapper_height_px&&stoped_wrapper.scrollTop(ul_height_px-stoped_wrapper_height_px)}},send_join_room:function(changeData){var that=this;that.socket.emit("join_room",changeData)},send_onlineStatus_toServicer:function(online,cid,sid){var that=this;that.socket.emit("onlineStatus_change",online,cid,sid)},show_error_dialog:function(msg,callback){var that=this;that.iosDialog2.find(".weui-dialog__bd").text(msg),that.iosDialog2.find(".weui-dialog__btn_primary").unbind().on("touchstart mousedown",function(e){e.preventDefault(),callback&&callback(),that.iosDialog2.css("display","none")}),that.iosDialog2.css("display","block")},form_send_submit_Listener:function(){var that=this,form=$(".footer_button form"),input_div=form.find(".message_content_div"),input=form.find(".message_content_input");form.unbind().on("submit",function(e){e.preventDefault(),$("input").blur();var text=input.val();""===text?that.show_error_dialog(""):(that.send_message.apply(that,[2,$func.convers(text),Base_meta.cid,Base_meta.sid]),input.val(""),input_div.text(""))})},back_button_Listener:function(){$(".footer_button .back").unbind().on("click",function(){location.href="/?cid="+Base_meta.cid.toString()})},wrapper_fixed_space_reset_height:function(){var that=this,footer_button=$(".footer_button"),footer_button_height_px=footer_button.height(),fixed_space=$(".fixed_space");fixed_space.css("height",footer_button_height_px+"px"),that.rollToBottom.apply(that)},emotion_button_Listener:function(){var that=this,footer_button=$(".footer_button"),footer_input_box=footer_button.find(".message_content_box"),footer_input_div=footer_button.find(".message_content_div"),footer_input=footer_button.find(".message_content_input"),setInputEnableFocus=function(){$(".footer_button").removeClass("showEmotion"),footer_input_div.css("display","none"),footer_input.css("display","block").focus(),$func.fix_ios_fixed_bottom_input(".footer_button",!0)};footer_button.find(".emotion").unbind().on("click",function(){footer_button.hasClass("showEmotion")?setInputEnableFocus():($(".footer_button").addClass("showEmotion"),footer_input.css("display","none"),footer_input_div.css("display","block"),footer_input_box.unbind().on("click",function(){setInputEnableFocus()}),$(window).on("touchmove",function(e){var touch_footer=$(e.target).parents(".footer_button").length>0;touch_footer&&(e.preventDefault(),e.stopPropagation())}),that.emotion_Listener.apply(that))}),footer_button.unbind().on("webkitTransitionEnd transitionEnd",function(e){e.preventDefault(),that.wrapper_fixed_space_reset_height.apply(that)})},emotion_Listener:function(){var footer_button=$(".footer_button"),emotion_button=footer_button.find(".screen_li li:not(.space)"),input=footer_button.find(".message_content_input"),input_div=footer_button.find(".message_content_div");emotion_button.unbind().on("click",function(){var _this=$(this),text_value=input.val();if(_this.hasClass("del")){if(0===text_value.length)return;var regRex=new RegExp(/^.*(\[.+?\])$/gi),result=regRex.exec(text_value),exec_del_charactor=function(){text_value=text_value.substring(0,text_value.length-1)};result&&comm_emotion.emotion_name_list&&comm_emotion.emotion_name_list.length&&comm_emotion.emotion_name_list.indexOf(result[1])>-1?text_value=text_value.substring(0,text_value.length-result[1].length):exec_del_charactor(),input.val(text_value),input_div.text(text_value)}else input.val(text_value+_this.attr("name")),input_div.text(input.val())})}};return chat});var GLOBAL_SOCKET_URL="http://localhost:4545";define("app/chat_tobeConnect",["lib/socket.io.min"],function($io){var chat_tobeConnect={init:function(){var that=this;that.loadingToast=$(".loadingToast"),that.iosDialog2=$("#iosDialog2"),that.line_button_Lisenter.apply(that),that.socket_connect.apply(that)},socket_connect:function(){var that=this;that.socket=$io.connect(GLOBAL_SOCKET_URL)},line_button_Lisenter:function(){var that=this;$("span.buttons").unbind().on("click",function(e){var _obj=$(e.target);switch(_obj.attr("class")){case"connectIn":that.button_connectIn_click.apply(that,[_obj]);break;case"reIn":that.button_reIn_click.apply(that,[_obj]);break;case"sendToOther":that.button_sendToOther_click.apply(that,[_obj])}})},button_connectIn_click:function(button){var cid=button.parents("li.line").attr("cid");location.href="./?kind=2&cid="+cid+"&sid="+Base_meta.servicer_id},button_reIn_click:function(button){var cid=button.parents("li.line").attr("cid");location.href="./?kind=2&cid="+cid+"&sid="+Base_meta.servicer_id},button_sendToOther_click:function(){var that=this;that.iosDialog2.find(".weui-dialog__bd").text(""),that.iosDialog2.find(".weui-dialog__btn_primary").unbind().on("mousedown touchstart",function(e){e.preventDefault(),that.iosDialog2.css("display","none")}),that.iosDialog2.css("display","block")}};return chat_tobeConnect}),define("app_mobile",["lib/zepto.min","modules/mobile_end_init"],function(){var page_name=document.getElementById("script_page").getAttribute("page");switch(page_name){case"chat_list":require(["app/chat_list"],function($obj){$obj.init()});break;case"chat":require(["app/chat"],function($obj){$obj.init()});break;case"chat_tobeConnect":require(["app/chat_tobeConnect"],function($obj){$obj.init()})}}),requirejs.config({}),require(["app_mobile","http://res.wx.qq.com/open/js/jweixin-1.0.0.js"]),define("main_mobile",function(){});